{
  "openapi": "3.1.0",
  "info": {
    "title": "AIQ API",
    "description": "**AIQ API** - A backend service for AI-generated cognitive assessments.\n\nThis API provides:\n* User authentication and profile management\n* Periodic cognitive testing with AI-generated questions\n* Test session management and response submission\n* Historical test results and trend analysis\n\n## Authentication\n\nMost endpoints require authentication using JWT Bearer tokens. Obtain tokens via the `/v1/auth/login` endpoint.\n\n## Testing Cadence\n\nUsers are recommended to take tests every 3 months for optimal cognitive tracking.",
    "contact": {
      "name": "AIQ Support",
      "email": "support@aiq.app"
    },
    "license": {
      "name": "MIT"
    },
    "version": "0.1.0"
  },
  "paths": {
    "/v1/health": {
      "get": {
        "tags": [
          "health"
        ],
        "summary": "Health Check",
        "description": "Health check endpoint.\nReturns basic health status of the API.",
        "operationId": "health_check_v1_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/v1/ping": {
      "get": {
        "tags": [
          "health"
        ],
        "summary": "Ping",
        "description": "Simple ping endpoint for basic connectivity testing.",
        "operationId": "ping_v1_ping_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/v1/auth/register": {
      "post": {
        "tags": [
          "auth"
        ],
        "summary": "Register User",
        "description": "Register a new user account.\n\nArgs:\n    user_data: User registration data\n    db: Database session\n\nReturns:\n    Created user information with access and refresh tokens\n\nRaises:\n    HTTPException: 409 if email already exists",
        "operationId": "register_user_v1_auth_register_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserRegister"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Token"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/v1/auth/login": {
      "post": {
        "tags": [
          "auth"
        ],
        "summary": "Login User",
        "description": "Authenticate user and return access + refresh tokens.\n\nArgs:\n    credentials: User login credentials\n    db: Database session\n\nReturns:\n    Access and refresh JWT tokens with user information\n\nRaises:\n    HTTPException: 401 if credentials are invalid",
        "operationId": "login_user_v1_auth_login_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserLogin"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Token"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/v1/auth/refresh": {
      "post": {
        "tags": [
          "auth"
        ],
        "summary": "Refresh Access Token",
        "description": "Refresh access token using refresh token.\n\nArgs:\n    current_user: Current authenticated user from refresh token\n    db: Database session\n\nReturns:\n    New access and refresh tokens with user information\n\nRaises:\n    HTTPException: 401 if refresh token is invalid",
        "operationId": "refresh_access_token_v1_auth_refresh_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TokenRefresh"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/v1/auth/logout": {
      "post": {
        "tags": [
          "auth"
        ],
        "summary": "Logout User",
        "description": "Logout user (client-side token invalidation).\n\nNote: Since we're using stateless JWT tokens, actual logout happens\non the client side by discarding the tokens. This endpoint validates\nthat the user is authenticated and allows the client to confirm logout.\n\nArgs:\n    current_user: Current authenticated user\n\nReturns:\n    No content (204)",
        "operationId": "logout_user_v1_auth_logout_post",
        "responses": {
          "204": {
            "description": "Successful Response"
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/v1/user/profile": {
      "get": {
        "tags": [
          "user"
        ],
        "summary": "Get User Profile",
        "description": "Get current user's profile information.\n\nArgs:\n    current_user: Current authenticated user\n\nReturns:\n    User profile information",
        "operationId": "get_user_profile_v1_user_profile_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      },
      "put": {
        "tags": [
          "user"
        ],
        "summary": "Update User Profile",
        "description": "Update current user's profile information.\n\nOnly provided fields will be updated. Fields not included in the\nrequest body will remain unchanged.\n\nArgs:\n    profile_update: Profile fields to update\n    current_user: Current authenticated user\n    db: Database session\n\nReturns:\n    Updated user profile information",
        "operationId": "update_user_profile_v1_user_profile_put",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserProfileUpdate"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/v1/user/delete-account": {
      "delete": {
        "tags": [
          "user"
        ],
        "summary": "Delete User Account",
        "description": "Delete user account and all associated data (GDPR right to erasure).\n\nThis endpoint permanently deletes:\n- User profile and credentials\n- All test sessions\n- All test responses\n- All test results\n- All user-question associations\n\nThis action is irreversible and complies with GDPR Article 17\n(Right to Erasure).\n\nArgs:\n    current_user: Current authenticated user\n    db: Database session\n\nReturns:\n    No content (204) on successful deletion\n\nRaises:\n    HTTPException: 500 if database error occurs during deletion",
        "operationId": "delete_user_account_v1_user_delete_account_delete",
        "responses": {
          "204": {
            "description": "Successful Response"
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/v1/questions/unseen": {
      "get": {
        "tags": [
          "questions"
        ],
        "summary": "Get Unseen Questions",
        "description": "Get unseen questions for the current user.\n\nThis endpoint returns questions that the user has never seen before,\nfiltered from the active question pool. Questions are selected to ensure\nno repetition for the user.\n\nArgs:\n    count: Number of questions to return (default: 20, max: 100)\n    current_user: Current authenticated user\n    db: Database session\n\nReturns:\n    List of unseen questions with metadata\n\nRaises:\n    HTTPException: If insufficient questions are available",
        "operationId": "get_unseen_questions_v1_questions_unseen_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "count",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Number of unseen questions to fetch (1-100)",
              "default": 20,
              "title": "Count"
            },
            "description": "Number of unseen questions to fetch (1-100)"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UnseenQuestionsResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/v1/test/start": {
      "post": {
        "tags": [
          "test"
        ],
        "summary": "Start Test",
        "description": "Start a new test session for the current user.\n\nCreates a new test session, fetches unseen questions, and marks them\nas seen for the user. Returns the session details and questions.\n\nArgs:\n    question_count: Number of questions to include in test\n    current_user: Current authenticated user\n    db: Database session\n\nReturns:\n    Test session and questions\n\nRaises:\n    HTTPException: If user has active test or insufficient questions\n\nNote:\n    Active Session Prevention Strategy (BCQ-045):\n    This endpoint uses a dual-check pattern to prevent duplicate active sessions:\n\n    1. Application-level check (below): Queries for existing active session BEFORE\n       creating a new one. Returns HTTP 400 with session_id in error message,\n       allowing clients to offer \"Resume existing session\" functionality.\n\n    2. Database-level check (in db.flush()): The partial unique index\n       ix_test_sessions_user_active catches race conditions when two requests\n       pass the app-level check simultaneously. Returns HTTP 409 without\n       session_id (unavailable due to rollback).\n\n    Both checks are intentionally kept because:\n    - App-level provides better UX (session_id for recovery options)\n    - DB-level is a last-resort safeguard for race conditions\n    - The DB constraint guarantees correctness even if app logic is bypassed",
        "operationId": "start_test_v1_test_start_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "question_count",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Number of questions for this test (1-100)",
              "default": 20,
              "title": "Question Count"
            },
            "description": "Number of questions for this test (1-100)"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StartTestResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/v1/test/session/{session_id}": {
      "get": {
        "tags": [
          "test"
        ],
        "summary": "Get Test Session",
        "description": "Get details for a specific test session.\n\nArgs:\n    session_id: Test session ID\n    current_user: Current authenticated user\n    db: Database session\n\nReturns:\n    Test session details with questions (if session is in_progress)\n\nRaises:\n    HTTPException: If session not found or doesn't belong to user",
        "operationId": "get_test_session_v1_test_session__session_id__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Session Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TestSessionStatusResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/v1/test/active": {
      "get": {
        "tags": [
          "test"
        ],
        "summary": "Get Active Test Session",
        "description": "Get the user's active (in_progress) test session if any.\n\nArgs:\n    current_user: Current authenticated user\n    db: Database session\n\nReturns:\n    Active test session or None",
        "operationId": "get_active_test_session_v1_test_active_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "anyOf": [
                    {
                      "$ref": "#/components/schemas/TestSessionStatusResponse"
                    },
                    {
                      "type": "null"
                    }
                  ],
                  "title": "Response Get Active Test Session V1 Test Active Get"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/v1/test/{session_id}/abandon": {
      "post": {
        "tags": [
          "test"
        ],
        "summary": "Abandon Test",
        "description": "Abandon an in-progress test session.\n\nMarks the test session as abandoned without calculating results.\nAny responses saved during the test will be preserved but no\ntest result will be created.\n\nArgs:\n    session_id: Test session ID to abandon\n    current_user: Current authenticated user\n    db: Database session\n\nReturns:\n    Abandoned session details with response count\n\nRaises:\n    HTTPException: If session not found, not authorized, or already completed",
        "operationId": "abandon_test_v1_test__session_id__abandon_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Session Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TestSessionAbandonResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/v1/test/submit": {
      "post": {
        "tags": [
          "test"
        ],
        "summary": "Submit Test",
        "description": "Submit responses for a test session.\n\nValidates and stores all user responses, compares them against correct\nanswers, and marks the test session as completed.\n\nArgs:\n    submission: Response submission with session_id and responses\n    current_user: Current authenticated user\n    db: Database session\n\nReturns:\n    Submission confirmation with updated session details\n\nRaises:\n    HTTPException: If session not found, not authorized, already completed,\n                  or validation fails",
        "operationId": "submit_test_v1_test_submit_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ResponseSubmission"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SubmitTestResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/v1/test/results/{result_id}": {
      "get": {
        "tags": [
          "test"
        ],
        "summary": "Get Test Result",
        "description": "Get a specific test result by ID.\n\nArgs:\n    result_id: Test result ID\n    current_user: Current authenticated user\n    db: Database session\n\nReturns:\n    Test result details with IQ score\n\nRaises:\n    HTTPException: If result not found or doesn't belong to user",
        "operationId": "get_test_result_v1_test_results__result_id__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "result_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Result Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TestResultResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/v1/test/history": {
      "get": {
        "tags": [
          "test"
        ],
        "summary": "Get Test History",
        "description": "Get historical test results for the current user with pagination.\n\nResults are returned in reverse chronological order (most recent first).\n\nArgs:\n    limit: Maximum number of results per page (default 50, max 100)\n    offset: Number of results to skip for pagination (default 0)\n    current_user: Current authenticated user\n    db: Database session\n\nReturns:\n    Paginated test results with total count and pagination metadata",
        "operationId": "get_test_history_v1_test_history_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Maximum number of results to return (default 50, max 100)",
              "default": 50,
              "title": "Limit"
            },
            "description": "Maximum number of results to return (default 50, max 100)"
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "Number of results to skip for pagination",
              "default": 0,
              "title": "Offset"
            },
            "description": "Number of results to skip for pagination"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PaginatedTestHistoryResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/v1/notifications/register-device": {
      "post": {
        "tags": [
          "notifications"
        ],
        "summary": "Register Device Token",
        "description": "Register or update the APNs device token for the current user.\n\nThis endpoint allows iOS devices to register their APNs device token\nso the backend can send push notifications. The token is stored in\nthe user's profile and will be updated if the device token changes.\n\nArgs:\n    token_data: Device token registration data\n    current_user: Current authenticated user\n    db: Database session\n\nReturns:\n    Success response with confirmation message",
        "operationId": "register_device_token_v1_notifications_register_device_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DeviceTokenRegister"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DeviceTokenResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      },
      "delete": {
        "tags": [
          "notifications"
        ],
        "summary": "Unregister Device Token",
        "description": "Unregister the APNs device token for the current user.\n\nThis endpoint allows users to remove their device token, typically\nwhen logging out or when they no longer want to receive notifications.\n\nArgs:\n    current_user: Current authenticated user\n    db: Database session\n\nReturns:\n    Success response with confirmation message",
        "operationId": "unregister_device_token_v1_notifications_register_device_delete",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DeviceTokenResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/v1/notifications/preferences": {
      "get": {
        "tags": [
          "notifications"
        ],
        "summary": "Get Notification Preferences",
        "description": "Get current notification preferences for the user.\n\nArgs:\n    current_user: Current authenticated user\n\nReturns:\n    Current notification preferences",
        "operationId": "get_notification_preferences_v1_notifications_preferences_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NotificationPreferencesResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      },
      "put": {
        "tags": [
          "notifications"
        ],
        "summary": "Update Notification Preferences",
        "description": "Update notification preferences for the current user.\n\nThis endpoint allows users to enable or disable push notifications\nwithout removing their device token.\n\nArgs:\n    preferences: Notification preferences\n    current_user: Current authenticated user\n    db: Database session\n\nReturns:\n    Updated notification preferences",
        "operationId": "update_notification_preferences_v1_notifications_preferences_put",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/NotificationPreferences"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NotificationPreferencesResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/v1/analytics/questions/{question_id}/statistics": {
      "get": {
        "tags": [
          "analytics"
        ],
        "summary": "Get Question Stats",
        "description": "Get performance statistics for a specific question.\n\nReturns empirical difficulty (p-value), discrimination, and response count.\n\nArgs:\n    question_id: Question ID\n    db: Database session\n\nReturns:\n    Dictionary with question statistics:\n    {\n        \"question_id\": int,\n        \"empirical_difficulty\": float or None,\n        \"discrimination\": float or None,\n        \"response_count\": int,\n        \"has_sufficient_data\": bool\n    }\n\nExample:\n    GET /api/v1/analytics/questions/42/statistics\n    Response:\n    {\n        \"question_id\": 42,\n        \"empirical_difficulty\": 0.72,\n        \"discrimination\": 0.45,\n        \"response_count\": 150,\n        \"has_sufficient_data\": true\n    }\n\nNotes:\n    - empirical_difficulty: proportion correct (0.0 = very hard, 1.0 = very easy)\n    - discrimination: item-total correlation (-1.0 to 1.0, higher = better)\n    - has_sufficient_data: true if response_count >= 30",
        "operationId": "get_question_stats_v1_analytics_questions__question_id__statistics_get",
        "parameters": [
          {
            "name": "question_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Question Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Get Question Stats V1 Analytics Questions  Question Id  Statistics Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/v1/analytics/questions/statistics": {
      "get": {
        "tags": [
          "analytics"
        ],
        "summary": "Get All Questions Stats",
        "description": "Get performance statistics for all questions.\n\nReturns list of questions with their empirical statistics,\nordered by response count (most responses first).\n\nArgs:\n    min_responses: Minimum response count to include (default: 0 for all)\n    db: Database session\n\nReturns:\n    List of question statistics, ordered by response count DESC\n\nExample:\n    GET /api/v1/analytics/questions/statistics?min_responses=30\n    Response:\n    [\n        {\n            \"question_id\": 42,\n            \"question_type\": \"mathematical\",\n            \"difficulty_level\": \"medium\",\n            \"empirical_difficulty\": 0.72,\n            \"discrimination\": 0.45,\n            \"response_count\": 150,\n            \"has_sufficient_data\": true,\n            \"is_active\": true\n        },\n        ...\n    ]\n\nUse Cases:\n    - Monitor overall question pool quality\n    - Identify which questions have sufficient calibration data\n    - Compare empirical vs assigned difficulty levels",
        "operationId": "get_all_questions_stats_v1_analytics_questions_statistics_get",
        "parameters": [
          {
            "name": "min_responses",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 1000,
              "minimum": 0,
              "description": "Minimum response count to include",
              "default": 0,
              "title": "Min Responses"
            },
            "description": "Minimum response count to include"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object"
                  },
                  "title": "Response Get All Questions Stats V1 Analytics Questions Statistics Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/v1/analytics/questions/problematic": {
      "get": {
        "tags": [
          "analytics"
        ],
        "summary": "Get Problematic Questions",
        "description": "Identify questions with poor psychometric properties.\n\nCategorizes problematic questions into four groups:\n1. Too easy: > 95% of users answer correctly\n2. Too hard: < 5% of users answer correctly\n3. Poor discrimination: discrimination < 0.2 (doesn't separate ability levels well)\n4. Negative discrimination: discrimination < 0 (low performers do better)\n\nArgs:\n    min_responses: Minimum responses required to flag (default: 30)\n    db: Database session\n\nReturns:\n    Dictionary with categorized problematic questions:\n    {\n        \"too_easy\": [...],\n        \"too_hard\": [...],\n        \"poor_discrimination\": [...],\n        \"negative_discrimination\": [...]\n    }\n\nExample:\n    GET /api/v1/analytics/questions/problematic?min_responses=50\n    Response:\n    {\n        \"too_easy\": [\n            {\n                \"question_id\": 15,\n                \"question_type\": \"verbal\",\n                \"difficulty_level\": \"easy\",\n                \"empirical_difficulty\": 0.97,\n                \"discrimination\": 0.15,\n                \"response_count\": 82\n            }\n        ],\n        \"too_hard\": [],\n        \"poor_discrimination\": [...],\n        \"negative_discrimination\": []\n    }\n\nUse Cases:\n    - Quality control: identify questions that need review or deactivation\n    - Test improvement: find questions that don't contribute to measurement\n    - LLM evaluation: assess which types of generated questions have issues\n\nNotes:\n    - Negative discrimination indicates a problematic question that should\n      likely be deactivated, as it suggests low-ability users do better\n    - Too easy/hard questions provide little information and should be reviewed\n    - Poor discrimination questions don't help separate high/low performers",
        "operationId": "get_problematic_questions_v1_analytics_questions_problematic_get",
        "parameters": [
          {
            "name": "min_responses",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 1000,
              "minimum": 2,
              "description": "Minimum responses required to flag as problematic",
              "default": 30,
              "title": "Min Responses"
            },
            "description": "Minimum responses required to flag as problematic"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "array",
                    "items": {
                      "type": "object"
                    }
                  },
                  "title": "Response Get Problematic Questions V1 Analytics Questions Problematic Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/v1/analytics/events": {
      "post": {
        "tags": [
          "analytics"
        ],
        "summary": "Submit Analytics Events",
        "description": "Submit a batch of analytics events from the client.\n\nThis endpoint accepts analytics events from iOS and other clients.\nEvents are stored for product analytics, debugging, and user\nexperience insights.\n\nAuthentication is optional - pre-auth events (like app launch)\ncan be submitted without a token.\n\nArgs:\n    batch: Batch of analytics events to submit\n    current_user: Current authenticated user (optional)\n    db: Database session\n\nReturns:\n    Response indicating how many events were received\n\nExample:\n    POST /api/v1/analytics/events\n    {\n        \"events\": [\n            {\n                \"event_name\": \"user.login\",\n                \"timestamp\": \"2024-01-15T10:30:00Z\",\n                \"properties\": {\"email_domain\": \"gmail.com\"}\n            }\n        ],\n        \"client_platform\": \"ios\",\n        \"app_version\": \"1.2.0\"\n    }",
        "operationId": "submit_analytics_events_v1_analytics_events_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AnalyticsEventsBatch"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AnalyticsEventsResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/v1/admin/trigger-question-generation": {
      "post": {
        "tags": [
          "admin",
          "Admin - Generation"
        ],
        "summary": "Trigger Question Generation",
        "description": "Manually trigger the question generation job.\n\nThis endpoint allows administrators to trigger the question generation\nprocess on-demand instead of waiting for the scheduled cron job.\n\nThe job is registered in the process registry for tracking. Use\nGET /v1/admin/background-jobs to list all registered jobs and\nGET /v1/admin/background-jobs/{job_id} to check status.\n\nRequires X-Admin-Token header with valid admin token.\n\nArgs:\n    request: Question generation parameters\n    _: Admin token validation dependency\n\nReturns:\n    TriggerQuestionGenerationResponse with job_id for tracking\n\nExample:\n    ```\n    curl -X POST https://api.example.com/v1/admin/trigger-question-generation           -H \"X-Admin-Token: your-admin-token\"           -H \"Content-Type: application/json\"           -d '{\"count\": 50, \"dry_run\": false}'\n    ```",
        "operationId": "trigger_question_generation_v1_admin_trigger_question_generation_post",
        "parameters": [
          {
            "name": "x-admin-token",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "X-Admin-Token"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TriggerQuestionGenerationRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TriggerQuestionGenerationResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/v1/admin/question-generation-status/{job_id}": {
      "get": {
        "tags": [
          "admin",
          "Admin - Generation"
        ],
        "summary": "Get Question Generation Status",
        "description": "Check the status of a question generation job by job ID.\n\nThis endpoint is deprecated. Use GET /v1/admin/background-jobs/{job_id} instead\nfor more detailed job information from the process registry.\n\nFor legacy compatibility, this endpoint also accepts a PID as job_id\nand will look up the job in the registry by PID.\n\nArgs:\n    job_id: Job ID (from registry) or Process ID (legacy)\n    _: Admin token validation dependency\n\nReturns:\n    Job status information",
        "operationId": "get_question_generation_status_v1_admin_question_generation_status__job_id__get",
        "parameters": [
          {
            "name": "job_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Job Id"
            }
          },
          {
            "name": "x-admin-token",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "X-Admin-Token"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/v1/admin/background-jobs": {
      "get": {
        "tags": [
          "admin",
          "Admin - Generation"
        ],
        "summary": "List Background Jobs",
        "description": "List all registered background jobs.\n\nReturns a list of all jobs registered in the process registry,\noptionally filtered by job type and/or status.\n\nRequires X-Admin-Token header with valid admin token.\n\nArgs:\n    job_type: Optional filter by job type\n    status: Optional filter by status\n    include_finished: Whether to include finished jobs\n    _: Admin token validation dependency\n\nReturns:\n    BackgroundJobListResponse with list of jobs and counts\n\nExample:\n    ```\n    # List all running jobs\n    curl \"https://api.example.com/v1/admin/background-jobs?status=running\"           -H \"X-Admin-Token: your-admin-token\"\n\n    # List only question generation jobs\n    curl \"https://api.example.com/v1/admin/background-jobs?job_type=question_generation\"           -H \"X-Admin-Token: your-admin-token\"\n    ```",
        "operationId": "list_background_jobs_v1_admin_background_jobs_get",
        "parameters": [
          {
            "name": "job_type",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by job type (e.g., 'question_generation')",
              "title": "Job Type"
            },
            "description": "Filter by job type (e.g., 'question_generation')"
          },
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by status (running, completed, failed, terminated)",
              "title": "Status"
            },
            "description": "Filter by status (running, completed, failed, terminated)"
          },
          {
            "name": "include_finished",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Include finished jobs in results",
              "default": true,
              "title": "Include Finished"
            },
            "description": "Include finished jobs in results"
          },
          {
            "name": "x-admin-token",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "X-Admin-Token"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BackgroundJobListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/v1/admin/background-jobs/stats": {
      "get": {
        "tags": [
          "admin",
          "Admin - Generation"
        ],
        "summary": "Get Background Job Stats",
        "description": "Get statistics about registered background jobs.\n\nReturns counts of jobs by status (running, completed, failed, terminated).\n\nRequires X-Admin-Token header with valid admin token.\n\nReturns:\n    BackgroundJobStatsResponse with job counts\n\nExample:\n    ```\n    curl \"https://api.example.com/v1/admin/background-jobs/stats\"           -H \"X-Admin-Token: your-admin-token\"\n    ```",
        "operationId": "get_background_job_stats_v1_admin_background_jobs_stats_get",
        "parameters": [
          {
            "name": "x-admin-token",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "X-Admin-Token"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BackgroundJobStatsResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/v1/admin/background-jobs/{job_id}": {
      "get": {
        "tags": [
          "admin",
          "Admin - Generation"
        ],
        "summary": "Get Background Job",
        "description": "Get detailed information about a specific background job.\n\nRequires X-Admin-Token header with valid admin token.\n\nArgs:\n    job_id: The unique job ID from the registry\n    _: Admin token validation dependency\n\nReturns:\n    BackgroundJobResponse with job details\n\nRaises:\n    HTTPException 404: If the job is not found\n\nExample:\n    ```\n    curl \"https://api.example.com/v1/admin/background-jobs/question_generation_20241221120000_1_12345\"           -H \"X-Admin-Token: your-admin-token\"\n    ```",
        "operationId": "get_background_job_v1_admin_background_jobs__job_id__get",
        "parameters": [
          {
            "name": "job_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Job Id"
            }
          },
          {
            "name": "x-admin-token",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "X-Admin-Token"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BackgroundJobResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "admin",
          "Admin - Generation"
        ],
        "summary": "Terminate Background Job",
        "description": "Terminate a running background job.\n\nSends SIGTERM (or SIGKILL if force=True) to the process.\nThis is useful for stopping runaway or stuck jobs.\n\nRequires X-Admin-Token header with valid admin token.\n\nArgs:\n    job_id: The unique job ID from the registry\n    force: If True, use SIGKILL instead of SIGTERM\n    _: Admin token validation dependency\n\nReturns:\n    Termination status\n\nRaises:\n    HTTPException 404: If the job is not found\n    HTTPException 400: If the job is not running\n\nExample:\n    ```\n    # Graceful termination\n    curl -X DELETE \"https://api.example.com/v1/admin/background-jobs/question_generation_20241221120000_1_12345\"           -H \"X-Admin-Token: your-admin-token\"\n\n    # Force kill\n    curl -X DELETE \"https://api.example.com/v1/admin/background-jobs/question_generation_20241221120000_1_12345?force=true\"           -H \"X-Admin-Token: your-admin-token\"\n    ```",
        "operationId": "terminate_background_job_v1_admin_background_jobs__job_id__delete",
        "parameters": [
          {
            "name": "job_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Job Id"
            }
          },
          {
            "name": "force",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Use SIGKILL instead of SIGTERM",
              "default": false,
              "title": "Force"
            },
            "description": "Use SIGKILL instead of SIGTERM"
          },
          {
            "name": "x-admin-token",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "X-Admin-Token"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/v1/admin/background-jobs/cleanup": {
      "post": {
        "tags": [
          "admin",
          "Admin - Generation"
        ],
        "summary": "Cleanup Finished Jobs",
        "description": "Remove finished jobs from the registry.\n\nThis endpoint triggers cleanup of all completed, failed, and terminated\njobs from the registry. This is useful for freeing memory and keeping\nthe job list manageable.\n\nNote: Cleanup also happens automatically when the server shuts down.\n\nRequires X-Admin-Token header with valid admin token.\n\nReturns:\n    Number of jobs cleaned up\n\nExample:\n    ```\n    curl -X POST \"https://api.example.com/v1/admin/background-jobs/cleanup\"           -H \"X-Admin-Token: your-admin-token\"\n    ```",
        "operationId": "cleanup_finished_jobs_v1_admin_background_jobs_cleanup_post",
        "parameters": [
          {
            "name": "x-admin-token",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "X-Admin-Token"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/v1/admin/generation-runs": {
      "post": {
        "tags": [
          "admin",
          "Admin - Generation"
        ],
        "summary": "Create Generation Run",
        "description": "Create a new question generation run record.\n\nThis endpoint accepts metrics from the question-service after a generation\nrun completes. It supports both initial \"running\" status reports and final\ncompletion reports with full metrics.\n\nRequires X-Service-Key header with valid service API key.\n\nArgs:\n    run_data: Question generation run metrics\n    db: Database session\n    _: Service key validation dependency\n\nReturns:\n    QuestionGenerationRunCreateResponse with created run ID\n\nExample:\n    ```\n    curl -X POST https://api.example.com/v1/admin/generation-runs \\\n      -H \"X-Service-Key: your-service-key\" \\\n      -H \"Content-Type: application/json\" \\\n      -d '{\n        \"started_at\": \"2024-12-05T10:00:00Z\",\n        \"completed_at\": \"2024-12-05T10:05:00Z\",\n        \"duration_seconds\": 300.5,\n        \"status\": \"success\",\n        \"exit_code\": 0,\n        \"questions_requested\": 50,\n        \"questions_generated\": 48,\n        \"questions_inserted\": 45,\n        \"overall_success_rate\": 0.9,\n        \"environment\": \"production\",\n        \"triggered_by\": \"scheduler\"\n      }'\n    ```",
        "operationId": "create_generation_run_v1_admin_generation_runs_post",
        "parameters": [
          {
            "name": "x-service-key",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "X-Service-Key"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/QuestionGenerationRunCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/QuestionGenerationRunCreateResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "admin",
          "Admin - Generation"
        ],
        "summary": "List Generation Runs",
        "description": "List question generation runs with pagination, filtering, and sorting.\n\nReturns a paginated list of generation run summaries (without full JSONB breakdowns)\nto optimize query performance. Use GET /v1/admin/generation-runs/{id} to retrieve\nfull details for a specific run.\n\nRequires X-Service-Key header with valid service API key.\n\n**Filters:**\n- `status`: Filter by run status (running, success, partial_failure, failed)\n- `environment`: Filter by environment (production, staging, development)\n- `start_date`/`end_date`: Filter by date range (ISO 8601 format)\n- `min_success_rate`/`max_success_rate`: Filter by success rate range (0.0-1.0)\n\n**Sorting:**\n- `sort_by`: Field to sort by (started_at, duration_seconds, overall_success_rate)\n- `sort_order`: Sort direction (asc, desc)\n\n**Pagination:**\n- `page`: Page number (1-indexed, default: 1)\n- `page_size`: Items per page (1-100, default: 20)\n\nExample:\n    ```\n    curl \"https://api.example.com/v1/admin/generation-runs?status=success&page=1&page_size=10\" \\\n      -H \"X-Service-Key: your-service-key\"\n    ```",
        "operationId": "list_generation_runs_v1_admin_generation_runs_get",
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "description": "Page number (1-indexed)",
              "default": 1,
              "title": "Page"
            },
            "description": "Page number (1-indexed)"
          },
          {
            "name": "page_size",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Items per page (1-100)",
              "default": 20,
              "title": "Page Size"
            },
            "description": "Items per page (1-100)"
          },
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "$ref": "#/components/schemas/GenerationRunStatusSchema"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by run status",
              "title": "Status"
            },
            "description": "Filter by run status"
          },
          {
            "name": "environment",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "maxLength": 20
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by environment",
              "title": "Environment"
            },
            "description": "Filter by environment"
          },
          {
            "name": "start_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date-time"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter runs started on or after this date (ISO format)",
              "title": "Start Date"
            },
            "description": "Filter runs started on or after this date (ISO format)"
          },
          {
            "name": "end_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date-time"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter runs started on or before this date (ISO format)",
              "title": "End Date"
            },
            "description": "Filter runs started on or before this date (ISO format)"
          },
          {
            "name": "min_success_rate",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "number",
                  "maximum": 1.0,
                  "minimum": 0.0
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by minimum overall success rate",
              "title": "Min Success Rate"
            },
            "description": "Filter by minimum overall success rate"
          },
          {
            "name": "max_success_rate",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "number",
                  "maximum": 1.0,
                  "minimum": 0.0
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by maximum overall success rate",
              "title": "Max Success Rate"
            },
            "description": "Filter by maximum overall success rate"
          },
          {
            "name": "sort_by",
            "in": "query",
            "required": false,
            "schema": {
              "enum": [
                "started_at",
                "duration_seconds",
                "overall_success_rate"
              ],
              "type": "string",
              "description": "Field to sort by",
              "default": "started_at",
              "title": "Sort By"
            },
            "description": "Field to sort by"
          },
          {
            "name": "sort_order",
            "in": "query",
            "required": false,
            "schema": {
              "enum": [
                "asc",
                "desc"
              ],
              "type": "string",
              "description": "Sort order (asc or desc)",
              "default": "desc",
              "title": "Sort Order"
            },
            "description": "Sort order (asc or desc)"
          },
          {
            "name": "x-service-key",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "X-Service-Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/QuestionGenerationRunListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/v1/admin/generation-runs/stats": {
      "get": {
        "tags": [
          "admin",
          "Admin - Generation"
        ],
        "summary": "Get Generation Runs Stats",
        "description": "Get aggregated statistics for generation runs over a time period.\n\nReturns aggregate metrics including success rates, approval rates, arbiter scores,\nprovider comparisons, and trend indicators. Useful for dashboards, trend analysis,\nand quality monitoring.\n\nRequires X-Service-Key header with valid service API key.\n\n**Query Parameters:**\n- `start_date`: Start of the analysis period (ISO 8601 format, required)\n- `end_date`: End of the analysis period (ISO 8601 format, required)\n- `environment`: Optional filter by environment (production, staging, development)\n\n**Trend Indicators:**\nThe response includes trend indicators comparing the first half vs second half\nof the analysis period. Possible values: \"improving\", \"declining\", \"stable\".\nA difference of less than 5% is considered \"stable\".\n\n**Provider Summary:**\nAggregated metrics per provider extracted from JSONB provider_metrics fields.\nIncludes total questions generated, total API calls, and success rates per provider.\n\nArgs:\n    start_date: Start of the analysis period\n    end_date: End of the analysis period\n    environment: Optional environment filter\n    db: Database session\n    _: Service key validation dependency\n\nReturns:\n    QuestionGenerationRunStats with aggregated metrics and trends\n\nExample:\n    ```\n    curl \"https://api.example.com/v1/admin/generation-runs/stats?start_date=2024-11-01T00:00:00Z&end_date=2024-12-01T00:00:00Z\" \\\n      -H \"X-Service-Key: your-service-key\"\n    ```",
        "operationId": "get_generation_runs_stats_v1_admin_generation_runs_stats_get",
        "parameters": [
          {
            "name": "start_date",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "format": "date-time",
              "description": "Start of the analysis period (ISO format, required)",
              "title": "Start Date"
            },
            "description": "Start of the analysis period (ISO format, required)"
          },
          {
            "name": "end_date",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "format": "date-time",
              "description": "End of the analysis period (ISO format, required)",
              "title": "End Date"
            },
            "description": "End of the analysis period (ISO format, required)"
          },
          {
            "name": "environment",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "maxLength": 20
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by environment",
              "title": "Environment"
            },
            "description": "Filter by environment"
          },
          {
            "name": "x-service-key",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "X-Service-Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/QuestionGenerationRunStats"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/v1/admin/generation-runs/{run_id}": {
      "get": {
        "tags": [
          "admin",
          "Admin - Generation"
        ],
        "summary": "Get Generation Run",
        "description": "Get detailed information for a specific generation run.\n\nReturns full run details including all JSONB breakdown fields and computed\npipeline loss metrics showing where questions were lost at each stage.\n\nRequires X-Service-Key header with valid service API key.\n\n**Pipeline Loss Metrics:**\nThe response includes a `pipeline_losses` object that tracks questions lost at:\n- `generation_loss`: Failed during LLM generation (requested - generated)\n- `evaluation_loss`: Not evaluated by arbiter (generated - evaluated)\n- `rejection_loss`: Rejected by arbiter (evaluated - approved)\n- `deduplication_loss`: Removed as duplicates\n- `insertion_loss`: Failed during database insertion\n- `total_loss`: Total lost across all stages (requested - inserted)\n\nEach loss includes both absolute count and percentage values.\n\nArgs:\n    run_id: The unique identifier of the generation run\n    db: Database session\n    _: Service key validation dependency\n\nReturns:\n    QuestionGenerationRunDetail with full run details and computed losses\n\nRaises:\n    HTTPException 404: If the run with the specified ID is not found\n\nExample:\n    ```\n    curl \"https://api.example.com/v1/admin/generation-runs/123\" \\\n      -H \"X-Service-Key: your-service-key\"\n    ```",
        "operationId": "get_generation_run_v1_admin_generation_runs__run_id__get",
        "parameters": [
          {
            "name": "run_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Run Id"
            }
          },
          {
            "name": "x-service-key",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "X-Service-Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/QuestionGenerationRunDetail"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/v1/admin/questions/calibration-health": {
      "get": {
        "tags": [
          "admin",
          "Admin - Calibration"
        ],
        "summary": "Get Calibration Health",
        "description": "Get calibration health summary for all questions.\n\nReturns a comprehensive overview of how well AI-assigned difficulty labels\nmatch empirical user performance data. Questions with empirical p-values\noutside the expected range for their assigned difficulty are flagged as\nmiscalibrated.\n\nRequires X-Admin-Token header with valid admin token.\n\n**Expected p-value ranges by difficulty:**\n- Easy: 0.70 - 0.90 (70-90% correct)\n- Medium: 0.40 - 0.70 (40-70% correct)\n- Hard: 0.15 - 0.40 (15-40% correct)\n\n**Severity levels:**\n- Minor: Within 0.10 of expected range boundary\n- Major: 0.10-0.25 outside expected range\n- Severe: >0.25 outside expected range\n\n**Response includes:**\n- Summary statistics (total, calibrated, miscalibrated, rate)\n- Breakdown by severity level\n- Breakdown by difficulty level\n- Top 10 most severely miscalibrated questions\n\nArgs:\n    min_responses: Minimum response count for reliable validation (default: 100)\n    db: Database session\n    _: Admin token validation dependency\n\nReturns:\n    CalibrationHealthResponse with comprehensive calibration status\n\nExample:\n    ```\n    curl \"https://api.example.com/v1/admin/questions/calibration-health?min_responses=100\" \\\n      -H \"X-Admin-Token: your-admin-token\"\n    ```",
        "operationId": "get_calibration_health_v1_admin_questions_calibration_health_get",
        "parameters": [
          {
            "name": "min_responses",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 1000,
              "minimum": 1,
              "description": "Minimum responses required for reliable validation",
              "default": 100,
              "title": "Min Responses"
            },
            "description": "Minimum responses required for reliable validation"
          },
          {
            "name": "x-admin-token",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "X-Admin-Token"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CalibrationHealthResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/v1/admin/questions/recalibrate": {
      "post": {
        "tags": [
          "admin",
          "Admin - Calibration"
        ],
        "summary": "Recalibrate Difficulty Labels",
        "description": "Trigger recalibration of question difficulty labels based on empirical data.\n\nUpdates difficulty labels for questions where the AI-assigned label\ndoesn't match actual user performance. Preserves original labels for\naudit purposes.\n\nRequires X-Admin-Token header with valid admin token.\n\n**Expected p-value ranges by difficulty:**\n- Easy: 0.70 - 0.90 (70-90% correct)\n- Medium: 0.40 - 0.70 (40-70% correct)\n- Hard: 0.15 - 0.40 (15-40% correct)\n\n**Severity levels (determines threshold):**\n- Minor: Within 0.10 of expected range boundary\n- Major: 0.10-0.25 outside expected range\n- Severe: >0.25 outside expected range\n\n**Recalibration modes:**\n- dry_run=true: Preview changes without applying (default)\n- dry_run=false: Commit changes to database\n\n**Filtering options:**\n- question_ids: Limit to specific questions\n- severity_threshold: Only recalibrate questions at or above this severity\n- min_responses: Require minimum response count for reliability\n\nArgs:\n    request: Recalibration parameters\n    db: Database session\n    _: Admin token validation dependency\n\nReturns:\n    RecalibrationResponse with recalibrated and skipped questions\n\nExample:\n    ```\n    # Dry run to preview changes\n    curl -X POST \"https://api.example.com/v1/admin/questions/recalibrate\" \\\n      -H \"X-Admin-Token: your-admin-token\" \\\n      -H \"Content-Type: application/json\" \\\n      -d '{\"dry_run\": true, \"min_responses\": 100, \"severity_threshold\": \"major\"}'\n\n    # Apply changes\n    curl -X POST \"https://api.example.com/v1/admin/questions/recalibrate\" \\\n      -H \"X-Admin-Token: your-admin-token\" \\\n      -H \"Content-Type: application/json\" \\\n      -d '{\"dry_run\": false, \"min_responses\": 100, \"severity_threshold\": \"major\"}'\n    ```",
        "operationId": "recalibrate_difficulty_labels_v1_admin_questions_recalibrate_post",
        "parameters": [
          {
            "name": "x-admin-token",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "X-Admin-Token"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RecalibrationRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RecalibrationResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/v1/admin/analytics/response-times": {
      "get": {
        "tags": [
          "admin",
          "Admin - Analytics"
        ],
        "summary": "Get Response Time Analytics",
        "description": "Get aggregate response time analytics across all completed test sessions.\n\nReturns comprehensive timing statistics including overall test duration,\nbreakdown by difficulty level and question type, and a summary of\ntiming anomalies (rapid responses, extended times, validity concerns).\n\nRequires X-Admin-Token header with valid admin token.\n\n**Overall Statistics:**\n- Mean and median total test duration in seconds\n- Mean time per question across all responses\n\n**By Difficulty:**\n- Mean and median response time for easy, medium, and hard questions\n\n**By Question Type:**\n- Mean response time for each question type (pattern, logic, spatial, math, verbal, memory)\n\n**Anomaly Summary:**\n- Count of sessions with rapid responses (< 3 seconds per question)\n- Count of sessions with extended response times (> 5 minutes per question)\n- Percentage of sessions flagged with validity concerns\n\nArgs:\n    db: Database session\n    _: Admin token validation dependency\n\nReturns:\n    ResponseTimeAnalyticsResponse with aggregate timing statistics\n\nExample:\n    ```\n    curl \"https://api.example.com/v1/admin/analytics/response-times\" \\\n      -H \"X-Admin-Token: your-admin-token\"\n    ```",
        "operationId": "get_response_time_analytics_v1_admin_analytics_response_times_get",
        "parameters": [
          {
            "name": "x-admin-token",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "X-Admin-Token"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseTimeAnalyticsResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/v1/admin/analytics/factor-analysis": {
      "get": {
        "tags": [
          "admin",
          "Admin - Analytics"
        ],
        "summary": "Get Factor Analysis",
        "description": "Perform factor analysis to calculate empirical g-loadings per domain.\n\nThis endpoint runs a factor analysis on all completed test sessions to\ndetermine how strongly each cognitive domain correlates with general\nintelligence (g). Results can be used to inform weighted scoring.\n\n**Requirements:**\n- Minimum 500 completed test sessions\n- Questions must have at least min_responses_per_question responses\n\n**Returns:**\n- g_loadings: Correlation of each domain with the g-factor (0-1)\n- variance_explained: How much variance the g-factor explains\n- reliability: Cronbach's alpha for internal consistency\n- recommendations: Actionable insights based on the results\n\n**Interpretation:**\n- Higher g-loadings indicate stronger correlation with general intelligence\n- Variance explained > 40% suggests a strong general factor\n- Cronbach's alpha >= 0.7 indicates acceptable reliability\n\nRequires X-Admin-Token header with valid admin token.",
        "operationId": "get_factor_analysis_v1_admin_analytics_factor_analysis_get",
        "parameters": [
          {
            "name": "min_responses_per_question",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 200,
              "minimum": 10,
              "description": "Minimum responses per question for inclusion",
              "default": 30,
              "title": "Min Responses Per Question"
            },
            "description": "Minimum responses per question for inclusion"
          },
          {
            "name": "max_responses",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 1000000,
              "minimum": 0,
              "description": "Maximum responses to fetch. Set to 0 for no limit (use with caution).",
              "default": 10000,
              "title": "Max Responses"
            },
            "description": "Maximum responses to fetch. Set to 0 for no limit (use with caution)."
          },
          {
            "name": "x-admin-token",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "X-Admin-Token"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FactorAnalysisResponse"
                }
              }
            }
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InsufficientSampleResponse"
                }
              }
            },
            "description": "Bad Request"
          },
          "401": {
            "description": "Invalid admin token"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/v1/admin/questions/{question_id}/distractor-analysis": {
      "get": {
        "tags": [
          "admin",
          "Admin - Distractors"
        ],
        "summary": "Get Distractor Analysis",
        "description": "Get detailed distractor analysis for a single question.\n\nAnalyzes the effectiveness of each answer option (distractor) for a\nmultiple-choice question. This helps identify non-functioning distractors\n(rarely selected) and inverted distractors (high scorers prefer them).\n\nRequires X-Admin-Token header with valid admin token.\n\n**Status Classifications:**\n- Functioning: Selected by >=5% of respondents (good distractor)\n- Weak: Selected by 2-5% of respondents (marginal)\n- Non-functioning: Selected by <2% of respondents (not attracting anyone)\n\n**Discrimination Classifications:**\n- Good: Bottom quartile selects more than top (positive index > 0.10)\n- Neutral: Similar selection rates across ability levels (|index| <= 0.10)\n- Inverted: Top quartile selects more than bottom (index < -0.10)\n  This is problematic as it suggests high-ability test-takers are attracted\n  to the \"wrong\" answer.\n\n**Effective Option Count:**\nCalculated using the inverse Simpson index. A value of 4.0 for a 4-option\nquestion means all options are selected equally. A value of 1.0 means\nessentially only one option is ever selected.\n\nArgs:\n    question_id: The unique identifier of the question to analyze\n    min_responses: Minimum number of responses required for analysis (default: 50)\n    db: Database session\n    _: Admin token validation dependency\n\nReturns:\n    DistractorAnalysisResponse with detailed analysis for each option\n\nRaises:\n    HTTPException 404: If the question is not found\n    HTTPException 400: If the question is not a multiple-choice question\n\nExample:\n    ```\n    curl \"https://api.example.com/v1/admin/questions/123/distractor-analysis?min_responses=50\" \\\n      -H \"X-Admin-Token: your-admin-token\"\n    ```",
        "operationId": "get_distractor_analysis_v1_admin_questions__question_id__distractor_analysis_get",
        "parameters": [
          {
            "name": "question_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Question Id"
            }
          },
          {
            "name": "min_responses",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 1000,
              "minimum": 1,
              "description": "Minimum responses required for analysis",
              "default": 50,
              "title": "Min Responses"
            },
            "description": "Minimum responses required for analysis"
          },
          {
            "name": "x-admin-token",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "X-Admin-Token"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DistractorAnalysisResponse"
                }
              }
            }
          },
          "404": {
            "description": "Question not found"
          },
          "400": {
            "description": "Question is not a multiple-choice question"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/v1/admin/questions/distractor-summary": {
      "get": {
        "tags": [
          "admin",
          "Admin - Distractors"
        ],
        "summary": "Get Distractor Summary",
        "description": "Get aggregate distractor analysis statistics across all questions.\n\nProvides a summary of distractor effectiveness across all multiple-choice\nquestions with sufficient response data. This helps identify systemic\nissues with question quality and prioritize question improvements.\n\nRequires X-Admin-Token header with valid admin token.\n\n**Summary Statistics:**\n- Total questions analyzed (meeting minimum response threshold)\n- Questions with non-functioning distractors (selected by <2%)\n- Questions with inverted distractors (high scorers prefer wrong answers)\n\n**Breakdown by Non-Functioning Count:**\n- How many questions have 0, 1, 2, or 3+ non-functioning distractors\n\n**Worst Offenders:**\n- Top 10 questions with the most distractor issues, sorted by severity\n- Severity is calculated as: (non_functioning * 2) + inverted\n\n**By Question Type:**\n- Stats grouped by question type (pattern, logic, spatial, etc.)\n- Helps identify if certain question types have more distractor issues\n\nArgs:\n    min_responses: Minimum number of responses required for analysis (default: 50)\n    question_type: Optional filter by question type\n    db: Database session\n    _: Admin token validation dependency\n\nReturns:\n    DistractorSummaryResponse with aggregate statistics\n\nExample:\n    ```\n    # Get summary for all questions\n    curl \"https://api.example.com/v1/admin/questions/distractor-summary\" \\\n      -H \"X-Admin-Token: your-admin-token\"\n\n    # Filter by question type\n    curl \"https://api.example.com/v1/admin/questions/distractor-summary?question_type=pattern\" \\\n      -H \"X-Admin-Token: your-admin-token\"\n\n    # Increase minimum response threshold\n    curl \"https://api.example.com/v1/admin/questions/distractor-summary?min_responses=100\" \\\n      -H \"X-Admin-Token: your-admin-token\"\n    ```",
        "operationId": "get_distractor_summary_v1_admin_questions_distractor_summary_get",
        "parameters": [
          {
            "name": "min_responses",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 1000,
              "minimum": 1,
              "description": "Minimum responses required for analysis",
              "default": 50,
              "title": "Min Responses"
            },
            "description": "Minimum responses required for analysis"
          },
          {
            "name": "question_type",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by question type (pattern, logic, spatial, math, verbal, memory)",
              "title": "Question Type"
            },
            "description": "Filter by question type (pattern, logic, spatial, math, verbal, memory)"
          },
          {
            "name": "x-admin-token",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "X-Admin-Token"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DistractorSummaryResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/v1/admin/sessions/{session_id}/validity": {
      "get": {
        "tags": [
          "admin",
          "Admin - Validity"
        ],
        "summary": "Get Session Validity",
        "description": "Get detailed validity analysis for a single test session.\n\nReturns the validity assessment for a specific test session, including\nthe overall validity status, severity score, confidence level, and\ndetailed breakdown of each validity check component.\n\nRequires X-Admin-Token header with valid admin token.\n\n**Validity Status:**\n- `valid`: No significant concerns, session is valid\n- `suspect`: Moderate concerns, may need manual review\n- `invalid`: Strong concerns, requires admin review\n\n**Severity Score:**\nCombined score from all validity checks:\n- Aberrant person-fit: +2 points\n- High-severity time flags: +2 points each\n- High Guttman errors: +2 points\n- Elevated Guttman errors: +1 point\n\n**Confidence:**\nInverse of severity (1.0 = fully confident, decreases by 0.15 per severity point)\n\n**On-Demand Analysis:**\nIf the session has not been validity-checked yet (sessions from before CD-007),\nvalidity analysis will be performed on-demand and the result will be returned\n(but not stored).\n\nArgs:\n    session_id: The test session ID to analyze\n    db: Database session\n    _: Admin token validation dependency\n\nReturns:\n    SessionValidityResponse with full validity breakdown\n\nRaises:\n    HTTPException 404: If the test session is not found\n\nExample:\n    ```\n    curl \"https://api.example.com/v1/admin/sessions/123/validity\" \\\n      -H \"X-Admin-Token: your-admin-token\"\n    ```",
        "operationId": "get_session_validity_v1_admin_sessions__session_id__validity_get",
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Session Id"
            }
          },
          {
            "name": "x-admin-token",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "X-Admin-Token"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SessionValidityResponse"
                }
              }
            }
          },
          "404": {
            "description": "Test session not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "admin",
          "Admin - Validity"
        ],
        "summary": "Override Session Validity",
        "description": "Override the validity status of a test session after admin review.\n\nAllows administrators to manually change the validity assessment for a\nsession after investigating the flags. This is essential for handling\nfalse positives (legitimate sessions incorrectly flagged) and false\nnegatives (invalid sessions that passed automatic checks).\n\nRequires X-Admin-Token header with valid admin token.\n\n**Important Notes:**\n- A reason must be provided (minimum 10 characters) for audit purposes\n- The previous validity status is preserved for audit trail\n- Override timestamp and admin placeholder are recorded\n- All override actions are logged for security monitoring\n\n**Use Cases:**\n- Clearing a false positive: User was flagged for rapid responses but\n  review confirms they're a fast reader with consistent test history\n- Marking a false negative: Session passed checks but investigation\n  reveals the account was shared or test was taken inappropriately\n- Downgrading after investigation: Session was flagged as \"invalid\"\n  but evidence suggests only moderate concern (\"suspect\")\n\nArgs:\n    session_id: The test session ID to update\n    request: Override request with new status and reason\n    db: Database session\n    _: Admin token validation dependency\n\nReturns:\n    ValidityOverrideResponse confirming the update\n\nRaises:\n    HTTPException 404: If the test session is not found\n\nExample:\n    ```\n    curl -X PATCH \"https://api.example.com/v1/admin/sessions/123/validity\" \\\n      -H \"X-Admin-Token: your-admin-token\" \\\n      -H \"Content-Type: application/json\" \\\n      -d '{\n        \"validity_status\": \"valid\",\n        \"override_reason\": \"Manual review confirmed legitimate pattern. User has consistent test history and rapid responses were on very easy questions.\"\n      }'\n    ```",
        "operationId": "override_session_validity_v1_admin_sessions__session_id__validity_patch",
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Session Id"
            }
          },
          {
            "name": "x-admin-token",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "X-Admin-Token"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ValidityOverrideRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidityOverrideResponse"
                }
              }
            }
          },
          "404": {
            "description": "Test session not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/v1/admin/validity-report": {
      "get": {
        "tags": [
          "admin",
          "Admin - Validity"
        ],
        "summary": "Get Validity Report",
        "description": "Get aggregate validity statistics across all test sessions.\n\nReturns a comprehensive summary of validity analysis results including\nstatus breakdowns, flag type counts, trend comparisons, and a list of\nsessions requiring admin review.\n\nRequires X-Admin-Token header with valid admin token.\n\n**Summary Statistics:**\n- Total sessions analyzed in the period\n- Count by validity status (valid, suspect, invalid)\n\n**Flag Type Breakdown:**\n- Count of each flag type detected across sessions\n- Helps identify most common validity concerns\n\n**Trend Analysis:**\n- Compares invalid/suspect rates between last 7 days and full period\n- Trend indicator: \"improving\", \"stable\", or \"worsening\"\n\n**Action Needed:**\n- List of sessions with invalid or suspect status needing review\n- Sorted by severity score (most severe first)\n- Limited to top 50 sessions to keep response manageable\n\nArgs:\n    days: Number of days to analyze (default: 30, max: 365)\n    status: Optional filter by validity status\n    db: Database session\n    _: Admin token validation dependency\n\nReturns:\n    ValiditySummaryResponse with aggregate validity statistics\n\nExample:\n    ```\n    # Get 30-day validity report\n    curl \"https://api.example.com/v1/admin/validity-report\" \\\n      -H \"X-Admin-Token: your-admin-token\"\n\n    # Get 7-day report for invalid sessions only\n    curl \"https://api.example.com/v1/admin/validity-report?days=7&status=invalid\" \\\n      -H \"X-Admin-Token: your-admin-token\"\n    ```",
        "operationId": "get_validity_report_v1_admin_validity_report_get",
        "parameters": [
          {
            "name": "days",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 365,
              "minimum": 1,
              "description": "Number of days to analyze (default: 30)",
              "default": 30,
              "title": "Days"
            },
            "description": "Number of days to analyze (default: 30)"
          },
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "$ref": "#/components/schemas/ValidityStatus"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by validity status (valid, suspect, invalid)",
              "title": "Status"
            },
            "description": "Filter by validity status (valid, suspect, invalid)"
          },
          {
            "name": "x-admin-token",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "X-Admin-Token"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValiditySummaryResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/v1/admin/config/weighted-scoring": {
      "get": {
        "tags": [
          "admin",
          "Admin - Config"
        ],
        "summary": "Get Weighted Scoring Status",
        "description": "Get the current weighted scoring configuration status.\n\nReturns whether weighted scoring is enabled and the current domain weights\nif configured.\n\nRequires X-Admin-Token header with valid admin token.\n\nReturns:\n    WeightedScoringStatus with enabled flag and domain weights\n\nExample:\n    ```\n    curl \"https://api.example.com/v1/admin/config/weighted-scoring\" \\\n      -H \"X-Admin-Token: your-admin-token\"\n    ```",
        "operationId": "get_weighted_scoring_status_v1_admin_config_weighted_scoring_get",
        "parameters": [
          {
            "name": "x-admin-token",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "X-Admin-Token"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WeightedScoringStatus"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "admin",
          "Admin - Config"
        ],
        "summary": "Toggle Weighted Scoring",
        "description": "Enable or disable weighted scoring.\n\nWhen enabled, IQ scores are calculated using domain weights that reflect\neach domain's correlation with general intelligence (g-loading). When\ndisabled, all domains are weighted equally.\n\nRequires X-Admin-Token header with valid admin token.\n\nArgs:\n    request: WeightedScoringToggleRequest with enabled flag\n\nReturns:\n    WeightedScoringToggleResponse with new status and confirmation message\n\nExample:\n    ```\n    curl -X POST \"https://api.example.com/v1/admin/config/weighted-scoring\" \\\n      -H \"X-Admin-Token: your-admin-token\" \\\n      -H \"Content-Type: application/json\" \\\n      -d '{\"enabled\": true}'\n    ```",
        "operationId": "toggle_weighted_scoring_v1_admin_config_weighted_scoring_post",
        "parameters": [
          {
            "name": "x-admin-token",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "X-Admin-Token"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/WeightedScoringToggleRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WeightedScoringToggleResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/v1/admin/config/domain-weights": {
      "get": {
        "tags": [
          "admin",
          "Admin - Config"
        ],
        "summary": "Get Domain Weights Config",
        "description": "Get the current domain weights configuration.\n\nReturns the configured domain weights used for weighted scoring calculations.\n\nRequires X-Admin-Token header with valid admin token.\n\nReturns:\n    DomainWeightsResponse with weights, or None if not configured\n\nExample:\n    ```\n    curl \"https://api.example.com/v1/admin/config/domain-weights\" \\\n      -H \"X-Admin-Token: your-admin-token\"\n    ```",
        "operationId": "get_domain_weights_config_v1_admin_config_domain_weights_get",
        "parameters": [
          {
            "name": "x-admin-token",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "X-Admin-Token"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "anyOf": [
                    {
                      "$ref": "#/components/schemas/DomainWeightsResponse"
                    },
                    {
                      "type": "null"
                    }
                  ],
                  "title": "Response Get Domain Weights Config V1 Admin Config Domain Weights Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "admin",
          "Admin - Config"
        ],
        "summary": "Set Domain Weights Config",
        "description": "Set the domain weights for weighted scoring.\n\nDomain weights determine how much each cognitive domain contributes to the\nfinal IQ score. Weights should reflect each domain's g-loading (correlation\nwith general intelligence).\n\nThe weights should ideally sum to 1.0, but will be normalized during\nscoring calculations if they don't.\n\nRequires X-Admin-Token header with valid admin token.\n\nArgs:\n    request: DomainWeightsRequest with weights dictionary\n\nReturns:\n    DomainWeightsResponse with confirmation\n\nExample:\n    ```\n    curl -X POST \"https://api.example.com/v1/admin/config/domain-weights\" \\\n      -H \"X-Admin-Token: your-admin-token\" \\\n      -H \"Content-Type: application/json\" \\\n      -d '{\"weights\": {\"pattern\": 0.20, \"logic\": 0.18, \"spatial\": 0.16, \"math\": 0.17, \"verbal\": 0.15, \"memory\": 0.14}}'\n    ```",
        "operationId": "set_domain_weights_config_v1_admin_config_domain_weights_post",
        "parameters": [
          {
            "name": "x-admin-token",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "X-Admin-Token"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DomainWeightsRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DomainWeightsResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/v1/admin/scoring/compare/{session_id}": {
      "get": {
        "tags": [
          "admin",
          "Admin - Config"
        ],
        "summary": "Compare Scoring Methods",
        "description": "Calculate and compare both equal-weight and weighted IQ scores for a test session.\n\nThis endpoint is useful for A/B testing weighted scoring before enabling it.\nIt recalculates both scores from the stored domain_scores and allows comparison\nwithout affecting the stored result.\n\nRequires X-Admin-Token header with valid admin token.\n\nArgs:\n    session_id: The test session ID to calculate comparison for\n\nReturns:\n    ABComparisonResult with both scores, difference, and details\n\nExample:\n    ```\n    curl \"https://api.example.com/v1/admin/scoring/compare/123\" \\\n      -H \"X-Admin-Token: your-admin-token\"\n    ```",
        "operationId": "compare_scoring_methods_v1_admin_scoring_compare__session_id__get",
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Session Id"
            }
          },
          {
            "name": "x-admin-token",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "X-Admin-Token"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ABComparisonResult"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/v1/admin/questions/discrimination-report": {
      "get": {
        "tags": [
          "admin",
          "Admin - Discrimination"
        ],
        "summary": "Get Discrimination Report Endpoint",
        "description": "Get comprehensive discrimination report for all questions.\n\nProvides an overview of question discrimination quality across the entire\nquestion pool, useful for monitoring test quality and identifying\nproblematic questions that need attention.\n\nRequires X-Admin-Token header with valid admin token.\n\n**Quality Tiers:**\n- Excellent: r >= 0.40 (very good discrimination)\n- Good: 0.30 <= r < 0.40 (good discrimination)\n- Acceptable: 0.20 <= r < 0.30 (adequate discrimination)\n- Poor: 0.10 <= r < 0.20 (poor discrimination)\n- Very Poor: 0.00 <= r < 0.10 (very poor discrimination)\n- Negative: r < 0.00 (problematic - high scorers miss more)\n\n**Report Sections:**\n- summary: Count of questions in each quality tier\n- quality_distribution: Percentage breakdown of quality tiers\n- by_difficulty: Mean discrimination and negative count by difficulty level\n- by_type: Mean discrimination and negative count by question type\n- action_needed: Questions requiring immediate_review or monitoring\n- trends: 30-day mean discrimination and new negatives this week\n\nArgs:\n    min_responses: Minimum response count for question inclusion (default: 30)\n    action_list_limit: Maximum items per action_needed list (default: 100).\n        Results are ordered by discrimination (worst first) so the most\n        problematic questions appear at the top.\n    db: Database session\n    _: Admin token validation dependency\n\nReturns:\n    DiscriminationReportResponse with comprehensive quality metrics\n\nExample:\n    ```\n    curl \"https://api.example.com/v1/admin/questions/discrimination-report?min_responses=50&action_list_limit=25\" \\\n      -H \"X-Admin-Token: your-admin-token\"\n    ```",
        "operationId": "get_discrimination_report_endpoint_v1_admin_questions_discrimination_report_get",
        "parameters": [
          {
            "name": "min_responses",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 1000,
              "minimum": 1,
              "description": "Minimum responses required for a question to be included in the report",
              "default": 30,
              "title": "Min Responses"
            },
            "description": "Minimum responses required for a question to be included in the report"
          },
          {
            "name": "action_list_limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 1000,
              "minimum": 1,
              "description": "Maximum items per action_needed list (immediate_review, monitor)",
              "default": 100,
              "title": "Action List Limit"
            },
            "description": "Maximum items per action_needed list (immediate_review, monitor)"
          },
          {
            "name": "x-admin-token",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "X-Admin-Token"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DiscriminationReportResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/v1/admin/questions/{question_id}/discrimination-detail": {
      "get": {
        "tags": [
          "admin",
          "Admin - Discrimination"
        ],
        "summary": "Get Discrimination Detail Endpoint",
        "description": "Get detailed discrimination info for a specific question.\n\nProvides in-depth discrimination analysis for a single question, including\ncomparison to type and difficulty averages, percentile ranking, and\nquality flag status.\n\nRequires X-Admin-Token header with valid admin token.\n\n**Response Fields:**\n- discrimination: Current point-biserial correlation value\n- quality_tier: Classification (excellent, good, acceptable, poor, very_poor, negative)\n- response_count: Number of responses used for calculation\n- compared_to_type_avg: How this question compares to its type average (above, below, at)\n- compared_to_difficulty_avg: How this question compares to its difficulty average\n- percentile_rank: Position among all questions (0-100)\n- quality_flag: Current flag status (normal, under_review, deactivated)\n- history: Historical discrimination values (if available)\n\nArgs:\n    question_id: The unique identifier of the question to analyze\n    db: Database session\n    _: Admin token validation dependency\n\nReturns:\n    DiscriminationDetailResponse with detailed question analysis\n\nRaises:\n    HTTPException 404: If the question is not found\n\nExample:\n    ```\n    curl \"https://api.example.com/v1/admin/questions/123/discrimination-detail\" \\\n      -H \"X-Admin-Token: your-admin-token\"\n    ```",
        "operationId": "get_discrimination_detail_endpoint_v1_admin_questions__question_id__discrimination_detail_get",
        "parameters": [
          {
            "name": "question_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Question Id"
            }
          },
          {
            "name": "x-admin-token",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "X-Admin-Token"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DiscriminationDetailResponse"
                }
              }
            }
          },
          "404": {
            "description": "Question not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/v1/admin/questions/{question_id}/quality-flag": {
      "patch": {
        "tags": [
          "admin",
          "Admin - Discrimination"
        ],
        "summary": "Update Quality Flag",
        "description": "Update the quality flag for a question.\n\nAllows admins to manually manage question quality status. Questions can be:\n- Set to \"under_review\" for further investigation\n- Set to \"deactivated\" to permanently exclude from tests (requires reason)\n- Set back to \"normal\" to return to active use\n\nRequires X-Admin-Token header with valid admin token.\n\n**Flag Values:**\n- `normal`: Question is active and eligible for test selection\n- `under_review`: Question is temporarily excluded pending review\n- `deactivated`: Question is permanently excluded from test selection\n\n**Validation:**\n- A reason is **required** when setting the flag to \"deactivated\"\n- A reason is optional but recommended for \"under_review\"\n\nArgs:\n    question_id: The unique identifier of the question to update\n    request: The quality flag update request containing new flag and optional reason\n    db: Database session\n    _: Admin token validation dependency\n\nReturns:\n    QualityFlagUpdateResponse with previous and new flag values\n\nRaises:\n    HTTPException 404: If the question is not found\n    HTTPException 422: If reason is missing when deactivating\n\nExample:\n    ```\n    curl -X PATCH \"https://api.example.com/v1/admin/questions/123/quality-flag\" \\\n      -H \"X-Admin-Token: your-admin-token\" \\\n      -H \"Content-Type: application/json\" \\\n      -d '{\"quality_flag\": \"deactivated\", \"reason\": \"Ambiguous wording confirmed by review\"}'\n    ```",
        "operationId": "update_quality_flag_v1_admin_questions__question_id__quality_flag_patch",
        "parameters": [
          {
            "name": "question_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Question Id"
            }
          },
          {
            "name": "x-admin-token",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "X-Admin-Token"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/QualityFlagUpdateRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/QualityFlagUpdateResponse"
                }
              }
            }
          },
          "404": {
            "description": "Question not found"
          },
          "422": {
            "description": "Validation error - reason required for deactivation"
          }
        }
      }
    },
    "/v1/admin/reliability": {
      "get": {
        "tags": [
          "admin",
          "Admin - Reliability"
        ],
        "summary": "Get Reliability Report Endpoint",
        "description": "Get reliability metrics report for admin dashboard.\n\nReturns comprehensive reliability metrics including:\n- **Cronbach's alpha**: Measures internal consistency (how well items measure\n  the same construct). Target: >= 0.70 for acceptable reliability.\n- **Test-retest reliability**: Measures score stability over time using Pearson\n  correlation between consecutive tests. Target: > 0.50 for acceptable reliability.\n- **Split-half reliability**: Measures internal consistency by splitting tests\n  into odd/even halves with Spearman-Brown correction. Target: >= 0.70.\n\n**Interpretation thresholds:**\n- Excellent: alpha/r >= 0.90\n- Good: alpha/r >= 0.80\n- Acceptable: alpha/r >= 0.70 (alpha/split-half) or r > 0.50 (test-retest)\n- Poor: Below acceptable thresholds\n\n**Data requirements:**\n- Cronbach's alpha and split-half: Minimum 100 completed test sessions\n- Test-retest: Minimum 30 users who have taken the test multiple times\n\nWhen `store_metrics=true` (default), calculated metrics are persisted to the\ndatabase for historical trend analysis via the `/reliability/history` endpoint.\n\nRequires X-Admin-Token header with valid admin token.\n\n**Caching (RE-FI-019):**\nResults are cached for 5 minutes when `store_metrics=false` to avoid\nrecalculating expensive metrics on every request. When `store_metrics=true`,\nfresh calculations are performed to ensure accurate data is stored.",
        "operationId": "get_reliability_report_endpoint_v1_admin_reliability_get",
        "parameters": [
          {
            "name": "min_sessions",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 10,
              "description": "Minimum sessions required for alpha/split-half calculations",
              "default": 100,
              "title": "Min Sessions"
            },
            "description": "Minimum sessions required for alpha/split-half calculations"
          },
          {
            "name": "min_retest_pairs",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 10,
              "description": "Minimum retest pairs required for test-retest calculation",
              "default": 30,
              "title": "Min Retest Pairs"
            },
            "description": "Minimum retest pairs required for test-retest calculation"
          },
          {
            "name": "store_metrics",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Whether to persist calculated metrics to the database",
              "default": true,
              "title": "Store Metrics"
            },
            "description": "Whether to persist calculated metrics to the database"
          },
          {
            "name": "x-admin-token",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "X-Admin-Token"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReliabilityReportResponse"
                }
              }
            }
          },
          "401": {
            "description": "Invalid admin token"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/v1/admin/reliability/history": {
      "get": {
        "tags": [
          "admin",
          "Admin - Reliability"
        ],
        "summary": "Get Reliability History Endpoint",
        "description": "Get historical reliability metrics for trend analysis.\n\nReturns stored reliability metrics from the database, optionally filtered\nby metric type and time period. Metrics are ordered by calculated_at DESC\n(most recent first).\n\n**Use cases:**\n- Track how reliability metrics change over time as more data is collected\n- Compare reliability across different time periods\n- Monitor the impact of item removals or additions on reliability\n\n**Query parameters:**\n- `metric_type`: Optional filter to retrieve only one type of metric\n  (cronbachs_alpha, test_retest, or split_half)\n- `days`: Number of days of history to retrieve (default: 90, max: 365)\n\nRequires X-Admin-Token header with valid admin token.",
        "operationId": "get_reliability_history_endpoint_v1_admin_reliability_history_get",
        "parameters": [
          {
            "name": "metric_type",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "enum": [
                    "cronbachs_alpha",
                    "test_retest",
                    "split_half"
                  ],
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by metric type: cronbachs_alpha, test_retest, split_half",
              "title": "Metric Type"
            },
            "description": "Filter by metric type: cronbachs_alpha, test_retest, split_half"
          },
          {
            "name": "days",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 365,
              "minimum": 1,
              "description": "Number of days of history to retrieve (1-365)",
              "default": 90,
              "title": "Days"
            },
            "description": "Number of days of history to retrieve (1-365)"
          },
          {
            "name": "x-admin-token",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "X-Admin-Token"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReliabilityHistoryResponse"
                }
              }
            }
          },
          "401": {
            "description": "Invalid admin token"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/v1/admin/day-30-reminders/send": {
      "post": {
        "tags": [
          "admin",
          "Admin - Notifications"
        ],
        "summary": "Send Day 30 Reminders",
        "description": "Send Day 30 reminder notifications to eligible users.\n\nThis endpoint identifies users who completed their first test approximately\n30 days ago and sends them a reminder notification. This is part of Phase 2.2\n(Provisional Notifications) to re-engage users early in their journey.\n\nThe notification is designed for provisional authorization:\n- No sound (silent delivery)\n- No badge increment\n- Appears only in Notification Center\n\nUsers with full notification authorization will also receive this notification,\nbut with the same silent characteristics for consistency.\n\nRequires X-Admin-Token header with valid admin token.\n\nReturns:\n    Day30ReminderResponse with counts of users found and notifications sent\n\nExample:\n    ```\n    curl -X POST https://api.example.com/v1/admin/day-30-reminders/send \\\n      -H \"X-Admin-Token: your-admin-token\"\n    ```",
        "operationId": "send_day_30_reminders_v1_admin_day_30_reminders_send_post",
        "parameters": [
          {
            "name": "x-admin-token",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "X-Admin-Token"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Day30ReminderResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/v1/admin/day-30-reminders/preview": {
      "get": {
        "tags": [
          "admin",
          "Admin - Notifications"
        ],
        "summary": "Preview Day 30 Reminders",
        "description": "Preview users who are eligible for Day 30 reminder notifications.\n\nThis endpoint returns a list of users who would receive Day 30 reminders\nif the send endpoint were called. Useful for verifying the query logic\nand previewing the notification recipients before sending.\n\nRequires X-Admin-Token header with valid admin token.\n\nArgs:\n    limit: Maximum number of users to return (1-100, default: 50)\n    db: Database session\n    _: Admin token validation dependency\n\nReturns:\n    Day30ReminderPreviewResponse with list of eligible users\n\nExample:\n    ```\n    curl \"https://api.example.com/v1/admin/day-30-reminders/preview?limit=10\" \\\n      -H \"X-Admin-Token: your-admin-token\"\n    ```",
        "operationId": "preview_day_30_reminders_v1_admin_day_30_reminders_preview_get",
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Maximum users to return",
              "default": 50,
              "title": "Limit"
            },
            "description": "Maximum users to return"
          },
          {
            "name": "x-admin-token",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "X-Admin-Token"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Day30ReminderPreviewResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/v1/feedback/submit": {
      "post": {
        "tags": [
          "feedback"
        ],
        "summary": "Submit Feedback",
        "description": "Submit user feedback, bug report, or feature request.\n\nThis endpoint allows users to submit feedback even before authentication,\nmaking it useful for reporting onboarding issues or bugs encountered\nduring the registration process.\n\nRate limit: 5 submissions per hour per IP address.\n\nArgs:\n    feedback_data: Feedback submission data\n    request: FastAPI request object (for IP extraction)\n    db: Database session\n    current_user: Optional authenticated user (injected by dependency)\n\nReturns:\n    Feedback submission confirmation with submission ID\n\nRaises:\n    HTTPException: 429 if rate limit exceeded, 500 on server error",
        "operationId": "submit_feedback_v1_feedback_submit_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/FeedbackSubmitRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FeedbackSubmitResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/": {
      "get": {
        "summary": "Root",
        "description": "Root endpoint.",
        "operationId": "root__get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "ABComparisonResult": {
        "properties": {
          "equal_weights_score": {
            "$ref": "#/components/schemas/ABComparisonScore",
            "description": "Score using equal weights across all domains"
          },
          "weighted_score": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/ABComparisonScore"
              },
              {
                "type": "null"
              }
            ],
            "description": "Score using configured domain weights (None if no weights configured)"
          },
          "score_difference": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Score Difference",
            "description": "Difference between weighted and equal scores (weighted - equal)"
          },
          "domain_scores": {
            "additionalProperties": {
              "type": "object"
            },
            "type": "object",
            "title": "Domain Scores",
            "description": "Per-domain performance breakdown used in calculations"
          },
          "weights_used": {
            "anyOf": [
              {
                "additionalProperties": {
                  "type": "number"
                },
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Weights Used",
            "description": "Domain weights used for weighted calculation"
          },
          "session_id": {
            "type": "integer",
            "title": "Session Id",
            "description": "Test session ID for which comparison was calculated"
          }
        },
        "type": "object",
        "required": [
          "equal_weights_score",
          "domain_scores",
          "session_id"
        ],
        "title": "ABComparisonResult",
        "description": "Response model for A/B comparison of scoring methods."
      },
      "ABComparisonScore": {
        "properties": {
          "iq_score": {
            "type": "integer",
            "title": "Iq Score",
            "description": "Calculated IQ score"
          },
          "accuracy_percentage": {
            "type": "number",
            "title": "Accuracy Percentage",
            "description": "Weighted or unweighted accuracy percentage"
          },
          "method": {
            "type": "string",
            "title": "Method",
            "description": "Scoring method used: 'equal_weights' or 'weighted'"
          }
        },
        "type": "object",
        "required": [
          "iq_score",
          "accuracy_percentage",
          "method"
        ],
        "title": "ABComparisonScore",
        "description": "Individual score result for A/B comparison."
      },
      "ActionNeededQuestion": {
        "properties": {
          "question_id": {
            "type": "integer",
            "title": "Question Id",
            "description": "Unique identifier of the question"
          },
          "discrimination": {
            "type": "number",
            "title": "Discrimination",
            "description": "Current discrimination value (point-biserial correlation)"
          },
          "response_count": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Response Count",
            "description": "Number of responses used to calculate discrimination"
          },
          "reason": {
            "type": "string",
            "title": "Reason",
            "description": "Reason this question needs attention"
          },
          "quality_flag": {
            "type": "string",
            "title": "Quality Flag",
            "description": "Current quality flag status"
          }
        },
        "type": "object",
        "required": [
          "question_id",
          "discrimination",
          "response_count",
          "reason",
          "quality_flag"
        ],
        "title": "ActionNeededQuestion",
        "description": "A question requiring admin review or monitoring."
      },
      "AnalyticsEvent": {
        "properties": {
          "event_name": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Event Name",
            "description": "Event type identifier (e.g., 'user.login', 'test.started')"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Timestamp",
            "description": "ISO 8601 timestamp when the event occurred on the client"
          },
          "properties": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Properties",
            "description": "Optional event properties/metadata"
          }
        },
        "type": "object",
        "required": [
          "event_name",
          "timestamp"
        ],
        "title": "AnalyticsEvent",
        "description": "Schema for a single analytics event from the client."
      },
      "AnalyticsEventsBatch": {
        "properties": {
          "events": {
            "items": {
              "$ref": "#/components/schemas/AnalyticsEvent"
            },
            "type": "array",
            "maxItems": 100,
            "minItems": 1,
            "title": "Events",
            "description": "List of analytics events (1-100 events per batch)"
          },
          "client_platform": {
            "type": "string",
            "title": "Client Platform",
            "description": "Client platform (e.g., 'ios', 'android', 'web')",
            "default": "ios"
          },
          "app_version": {
            "type": "string",
            "maxLength": 20,
            "minLength": 1,
            "title": "App Version",
            "description": "App version string"
          },
          "device_id": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Device Id",
            "description": "Optional device identifier for event correlation"
          }
        },
        "type": "object",
        "required": [
          "events",
          "app_version"
        ],
        "title": "AnalyticsEventsBatch",
        "description": "Schema for submitting a batch of analytics events."
      },
      "AnalyticsEventsResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether events were received successfully"
          },
          "events_received": {
            "type": "integer",
            "title": "Events Received",
            "description": "Number of events received"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Response message"
          }
        },
        "type": "object",
        "required": [
          "success",
          "events_received",
          "message"
        ],
        "title": "AnalyticsEventsResponse",
        "description": "Response schema for analytics events submission."
      },
      "AnomalySummary": {
        "properties": {
          "sessions_with_rapid_responses": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Sessions With Rapid Responses",
            "description": "Number of sessions with rapid responses (< 3 seconds)"
          },
          "sessions_with_extended_times": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Sessions With Extended Times",
            "description": "Number of sessions with extended response times (> 5 minutes)"
          },
          "pct_flagged": {
            "type": "number",
            "minimum": 0.0,
            "title": "Pct Flagged",
            "description": "Percentage of sessions with any validity concern"
          }
        },
        "type": "object",
        "required": [
          "sessions_with_rapid_responses",
          "sessions_with_extended_times",
          "pct_flagged"
        ],
        "title": "AnomalySummary",
        "description": "Summary of response time anomalies across all sessions."
      },
      "BackgroundJobListResponse": {
        "properties": {
          "jobs": {
            "items": {
              "$ref": "#/components/schemas/BackgroundJobResponse"
            },
            "type": "array",
            "title": "Jobs"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          },
          "running": {
            "type": "integer",
            "title": "Running"
          },
          "completed": {
            "type": "integer",
            "title": "Completed"
          },
          "failed": {
            "type": "integer",
            "title": "Failed"
          }
        },
        "type": "object",
        "required": [
          "jobs",
          "total",
          "running",
          "completed",
          "failed"
        ],
        "title": "BackgroundJobListResponse",
        "description": "Response model for listing background jobs."
      },
      "BackgroundJobResponse": {
        "properties": {
          "job_id": {
            "type": "string",
            "title": "Job Id"
          },
          "pid": {
            "type": "integer",
            "title": "Pid"
          },
          "job_type": {
            "type": "string",
            "title": "Job Type"
          },
          "started_at": {
            "type": "string",
            "title": "Started At"
          },
          "status": {
            "type": "string",
            "title": "Status"
          },
          "exit_code": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Exit Code"
          },
          "finished_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Finished At"
          },
          "command": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Command"
          },
          "working_directory": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Working Directory"
          },
          "metadata": {
            "type": "object",
            "title": "Metadata",
            "default": {}
          }
        },
        "type": "object",
        "required": [
          "job_id",
          "pid",
          "job_type",
          "started_at",
          "status",
          "command"
        ],
        "title": "BackgroundJobResponse",
        "description": "Response model for background job status."
      },
      "BackgroundJobStatsResponse": {
        "properties": {
          "total_registered": {
            "type": "integer",
            "title": "Total Registered"
          },
          "running": {
            "type": "integer",
            "title": "Running"
          },
          "completed": {
            "type": "integer",
            "title": "Completed"
          },
          "failed": {
            "type": "integer",
            "title": "Failed"
          },
          "terminated": {
            "type": "integer",
            "title": "Terminated"
          }
        },
        "type": "object",
        "required": [
          "total_registered",
          "running",
          "completed",
          "failed",
          "terminated"
        ],
        "title": "BackgroundJobStatsResponse",
        "description": "Response model for background job statistics."
      },
      "ByDifficultyStats": {
        "properties": {
          "easy": {
            "$ref": "#/components/schemas/DifficultyTimeStats",
            "description": "Time statistics for easy questions"
          },
          "medium": {
            "$ref": "#/components/schemas/DifficultyTimeStats",
            "description": "Time statistics for medium questions"
          },
          "hard": {
            "$ref": "#/components/schemas/DifficultyTimeStats",
            "description": "Time statistics for hard questions"
          }
        },
        "type": "object",
        "required": [
          "easy",
          "medium",
          "hard"
        ],
        "title": "ByDifficultyStats",
        "description": "Response time statistics broken down by difficulty level."
      },
      "ByQuestionTypeStats": {
        "properties": {
          "pattern": {
            "$ref": "#/components/schemas/QuestionTypeTimeStats",
            "description": "Time statistics for pattern recognition questions"
          },
          "logic": {
            "$ref": "#/components/schemas/QuestionTypeTimeStats",
            "description": "Time statistics for logical reasoning questions"
          },
          "spatial": {
            "$ref": "#/components/schemas/QuestionTypeTimeStats",
            "description": "Time statistics for spatial reasoning questions"
          },
          "math": {
            "$ref": "#/components/schemas/QuestionTypeTimeStats",
            "description": "Time statistics for mathematical questions"
          },
          "verbal": {
            "$ref": "#/components/schemas/QuestionTypeTimeStats",
            "description": "Time statistics for verbal reasoning questions"
          },
          "memory": {
            "$ref": "#/components/schemas/QuestionTypeTimeStats",
            "description": "Time statistics for memory questions"
          }
        },
        "type": "object",
        "required": [
          "pattern",
          "logic",
          "spatial",
          "math",
          "verbal",
          "memory"
        ],
        "title": "ByQuestionTypeStats",
        "description": "Response time statistics broken down by question type."
      },
      "CalibrationHealthResponse": {
        "properties": {
          "summary": {
            "$ref": "#/components/schemas/CalibrationSummary",
            "description": "Overall calibration summary statistics"
          },
          "by_severity": {
            "$ref": "#/components/schemas/SeverityBreakdown",
            "description": "Miscalibrated questions broken down by severity level"
          },
          "by_difficulty": {
            "$ref": "#/components/schemas/DifficultyBreakdown",
            "description": "Calibration status broken down by difficulty level"
          },
          "worst_offenders": {
            "items": {
              "$ref": "#/components/schemas/MiscalibratedQuestion"
            },
            "type": "array",
            "maxItems": 10,
            "title": "Worst Offenders",
            "description": "Top 10 most severely miscalibrated questions"
          }
        },
        "type": "object",
        "required": [
          "summary",
          "by_severity",
          "by_difficulty",
          "worst_offenders"
        ],
        "title": "CalibrationHealthResponse",
        "description": "Response schema for GET /v1/admin/questions/calibration-health.\n\nProvides a comprehensive overview of question calibration status\nacross the question pool.",
        "example": {
          "by_difficulty": {
            "easy": {
              "calibrated": 150,
              "miscalibrated": 20
            },
            "hard": {
              "calibrated": 90,
              "miscalibrated": 25
            },
            "medium": {
              "calibrated": 180,
              "miscalibrated": 35
            }
          },
          "by_severity": {
            "major": 25,
            "minor": 45,
            "severe": 10
          },
          "summary": {
            "correctly_calibrated": 420,
            "miscalibrated": 80,
            "miscalibration_rate": 0.16,
            "total_questions_with_data": 500
          },
          "worst_offenders": [
            {
              "assigned_difficulty": "hard",
              "empirical_difficulty": 0.85,
              "expected_range": [
                0.15,
                0.4
              ],
              "question_id": 123,
              "response_count": 156,
              "severity": "severe",
              "suggested_label": "easy"
            }
          ]
        }
      },
      "CalibrationSummary": {
        "properties": {
          "total_questions_with_data": {
            "type": "integer",
            "title": "Total Questions With Data",
            "description": "Total number of questions with sufficient response data"
          },
          "correctly_calibrated": {
            "type": "integer",
            "title": "Correctly Calibrated",
            "description": "Number of questions where empirical difficulty matches label"
          },
          "miscalibrated": {
            "type": "integer",
            "title": "Miscalibrated",
            "description": "Number of questions where empirical difficulty doesn't match label"
          },
          "miscalibration_rate": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Miscalibration Rate",
            "description": "Proportion of questions that are miscalibrated (0.0-1.0)"
          }
        },
        "type": "object",
        "required": [
          "total_questions_with_data",
          "correctly_calibrated",
          "miscalibrated",
          "miscalibration_rate"
        ],
        "title": "CalibrationSummary",
        "description": "Summary statistics for calibration health."
      },
      "ConfidenceIntervalSchema": {
        "properties": {
          "lower": {
            "type": "integer",
            "maximum": 160.0,
            "minimum": 40.0,
            "title": "Lower",
            "description": "Lower bound of the confidence interval (clamped to valid IQ range 40-160)"
          },
          "upper": {
            "type": "integer",
            "maximum": 160.0,
            "minimum": 40.0,
            "title": "Upper",
            "description": "Upper bound of the confidence interval (clamped to valid IQ range 40-160)"
          },
          "confidence_level": {
            "type": "number",
            "exclusiveMaximum": 1.0,
            "exclusiveMinimum": 0.0,
            "title": "Confidence Level",
            "description": "Confidence level as a decimal (must be strictly between 0 and 1, e.g., 0.95 for 95% CI)"
          },
          "standard_error": {
            "type": "number",
            "minimum": 0.0,
            "title": "Standard Error",
            "description": "Standard Error of Measurement (SEM) used to calculate the interval"
          }
        },
        "type": "object",
        "required": [
          "lower",
          "upper",
          "confidence_level",
          "standard_error"
        ],
        "title": "ConfidenceIntervalSchema",
        "description": "Schema for confidence interval data around an IQ score.\n\nConfidence intervals quantify the uncertainty in score measurement,\nproviding a range within which the true score is likely to fall.\nThis is calculated using the Standard Error of Measurement (SEM)\nderived from the test's reliability coefficient.\n\nExample: A score of 108 with CI [101, 115] at 95% confidence means\nthere is a 95% probability the true score falls between 101 and 115."
      },
      "Day30ReminderPreviewResponse": {
        "properties": {
          "message": {
            "type": "string",
            "title": "Message"
          },
          "users_count": {
            "type": "integer",
            "title": "Users Count"
          },
          "users": {
            "items": {},
            "type": "array",
            "title": "Users"
          }
        },
        "type": "object",
        "required": [
          "message",
          "users_count",
          "users"
        ],
        "title": "Day30ReminderPreviewResponse",
        "description": "Response model for previewing Day 30 reminder candidates."
      },
      "Day30ReminderResponse": {
        "properties": {
          "message": {
            "type": "string",
            "title": "Message"
          },
          "users_found": {
            "type": "integer",
            "title": "Users Found"
          },
          "notifications_sent": {
            "type": "integer",
            "title": "Notifications Sent"
          },
          "success": {
            "type": "integer",
            "title": "Success"
          },
          "failed": {
            "type": "integer",
            "title": "Failed"
          }
        },
        "type": "object",
        "required": [
          "message",
          "users_found",
          "notifications_sent",
          "success",
          "failed"
        ],
        "title": "Day30ReminderResponse",
        "description": "Response model for Day 30 reminder trigger."
      },
      "DeviceTokenRegister": {
        "properties": {
          "device_token": {
            "type": "string",
            "maxLength": 200,
            "minLength": 64,
            "title": "Device Token",
            "description": "APNs device token (64-200 characters)"
          }
        },
        "type": "object",
        "required": [
          "device_token"
        ],
        "title": "DeviceTokenRegister",
        "description": "Schema for registering an APNs device token."
      },
      "DeviceTokenResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether registration was successful"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Response message"
          }
        },
        "type": "object",
        "required": [
          "success",
          "message"
        ],
        "title": "DeviceTokenResponse",
        "description": "Schema for device token registration response."
      },
      "DifficultyBreakdown": {
        "properties": {
          "easy": {
            "$ref": "#/components/schemas/DifficultyCalibrationStatus",
            "description": "Calibration status for easy questions"
          },
          "medium": {
            "$ref": "#/components/schemas/DifficultyCalibrationStatus",
            "description": "Calibration status for medium questions"
          },
          "hard": {
            "$ref": "#/components/schemas/DifficultyCalibrationStatus",
            "description": "Calibration status for hard questions"
          }
        },
        "type": "object",
        "required": [
          "easy",
          "medium",
          "hard"
        ],
        "title": "DifficultyBreakdown",
        "description": "Breakdown of calibration status by difficulty level."
      },
      "DifficultyCalibrationStatus": {
        "properties": {
          "calibrated": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Calibrated",
            "description": "Number of correctly calibrated questions at this difficulty"
          },
          "miscalibrated": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Miscalibrated",
            "description": "Number of miscalibrated questions at this difficulty"
          }
        },
        "type": "object",
        "required": [
          "calibrated",
          "miscalibrated"
        ],
        "title": "DifficultyCalibrationStatus",
        "description": "Calibration status for a specific difficulty level."
      },
      "DifficultyDiscrimination": {
        "properties": {
          "mean_discrimination": {
            "type": "number",
            "title": "Mean Discrimination",
            "description": "Mean discrimination value for this difficulty level"
          },
          "negative_count": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Negative Count",
            "description": "Number of questions with negative discrimination at this difficulty"
          }
        },
        "type": "object",
        "required": [
          "mean_discrimination",
          "negative_count"
        ],
        "title": "DifficultyDiscrimination",
        "description": "Discrimination statistics for a difficulty level."
      },
      "DifficultyTimeStats": {
        "properties": {
          "mean_seconds": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Mean Seconds",
            "description": "Mean response time in seconds"
          },
          "median_seconds": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Median Seconds",
            "description": "Median response time in seconds"
          }
        },
        "type": "object",
        "title": "DifficultyTimeStats",
        "description": "Response time statistics for a specific difficulty level."
      },
      "DiscriminationDetailHistory": {
        "properties": {
          "date": {
            "type": "string",
            "title": "Date",
            "description": "Date of this discrimination calculation (ISO 8601 format)"
          },
          "discrimination": {
            "type": "number",
            "title": "Discrimination",
            "description": "Discrimination value at this point in time"
          },
          "responses": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Responses",
            "description": "Number of responses at this point in time"
          }
        },
        "type": "object",
        "required": [
          "date",
          "discrimination",
          "responses"
        ],
        "title": "DiscriminationDetailHistory",
        "description": "Historical discrimination data point."
      },
      "DiscriminationDetailResponse": {
        "properties": {
          "question_id": {
            "type": "integer",
            "title": "Question Id",
            "description": "Unique identifier of the question"
          },
          "discrimination": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Discrimination",
            "description": "Current discrimination value (point-biserial correlation)"
          },
          "quality_tier": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/QualityTier"
              },
              {
                "type": "null"
              }
            ],
            "description": "Quality tier classification based on discrimination value"
          },
          "response_count": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Response Count",
            "description": "Number of responses used to calculate discrimination"
          },
          "compared_to_type_avg": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Compared To Type Avg",
            "description": "How this question compares to the average for its type (above, below, at)"
          },
          "compared_to_difficulty_avg": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Compared To Difficulty Avg",
            "description": "How this question compares to the average for its difficulty (above, below, at)"
          },
          "percentile_rank": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 100.0,
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Percentile Rank",
            "description": "Percentile rank of this question's discrimination among all questions"
          },
          "quality_flag": {
            "type": "string",
            "title": "Quality Flag",
            "description": "Current quality flag status (normal, under_review, deactivated)"
          },
          "history": {
            "items": {
              "$ref": "#/components/schemas/DiscriminationDetailHistory"
            },
            "type": "array",
            "title": "History",
            "description": "Historical discrimination values over time"
          }
        },
        "type": "object",
        "required": [
          "question_id",
          "response_count",
          "quality_flag"
        ],
        "title": "DiscriminationDetailResponse",
        "description": "Response schema for GET /v1/admin/questions/{id}/discrimination-detail.\n\nProvides detailed discrimination information for a specific question.",
        "example": {
          "compared_to_difficulty_avg": "above",
          "compared_to_type_avg": "above",
          "discrimination": 0.42,
          "history": [
            {
              "date": "2025-11-01",
              "discrimination": 0.38,
              "responses": 50
            },
            {
              "date": "2025-11-15",
              "discrimination": 0.4,
              "responses": 100
            },
            {
              "date": "2025-12-01",
              "discrimination": 0.42,
              "responses": 156
            }
          ],
          "percentile_rank": 85,
          "quality_flag": "normal",
          "quality_tier": "excellent",
          "question_id": 123,
          "response_count": 156
        }
      },
      "DiscriminationReportResponse": {
        "properties": {
          "summary": {
            "$ref": "#/components/schemas/DiscriminationSummary",
            "description": "Summary counts by quality tier"
          },
          "quality_distribution": {
            "$ref": "#/components/schemas/QualityDistribution",
            "description": "Percentage distribution of quality tiers"
          },
          "by_difficulty": {
            "additionalProperties": {
              "$ref": "#/components/schemas/DifficultyDiscrimination"
            },
            "type": "object",
            "title": "By Difficulty",
            "description": "Discrimination statistics grouped by difficulty level (easy, medium, hard)"
          },
          "by_type": {
            "additionalProperties": {
              "$ref": "#/components/schemas/TypeDiscrimination"
            },
            "type": "object",
            "title": "By Type",
            "description": "Discrimination statistics grouped by question type"
          },
          "action_needed": {
            "additionalProperties": {
              "items": {
                "$ref": "#/components/schemas/ActionNeededQuestion"
              },
              "type": "array"
            },
            "type": "object",
            "title": "Action Needed",
            "description": "Questions requiring attention, grouped by urgency (immediate_review, monitor)"
          },
          "trends": {
            "$ref": "#/components/schemas/DiscriminationTrends",
            "description": "Trend information for discrimination"
          }
        },
        "type": "object",
        "required": [
          "summary",
          "quality_distribution",
          "by_difficulty",
          "by_type",
          "action_needed",
          "trends"
        ],
        "title": "DiscriminationReportResponse",
        "description": "Response schema for GET /v1/admin/questions/discrimination-report.\n\nProvides comprehensive discrimination analysis across all questions.",
        "example": {
          "action_needed": {
            "immediate_review": [
              {
                "discrimination": -0.15,
                "quality_flag": "under_review",
                "question_id": 123,
                "reason": "Negative discrimination: high scorers missing this question more than low scorers",
                "response_count": 87
              }
            ],
            "monitor": [
              {
                "discrimination": 0.05,
                "quality_flag": "normal",
                "question_id": 456,
                "reason": "Very poor discrimination: not differentiating between ability levels",
                "response_count": 62
              }
            ]
          },
          "by_difficulty": {
            "easy": {
              "mean_discrimination": 0.28,
              "negative_count": 2
            },
            "hard": {
              "mean_discrimination": 0.31,
              "negative_count": 3
            },
            "medium": {
              "mean_discrimination": 0.35,
              "negative_count": 3
            }
          },
          "by_type": {
            "logical_reasoning": {
              "mean_discrimination": 0.31,
              "negative_count": 1
            },
            "mathematical": {
              "mean_discrimination": 0.36,
              "negative_count": 1
            },
            "pattern_recognition": {
              "mean_discrimination": 0.33,
              "negative_count": 2
            },
            "spatial_reasoning": {
              "mean_discrimination": 0.29,
              "negative_count": 3
            },
            "verbal_reasoning": {
              "mean_discrimination": 0.3,
              "negative_count": 1
            }
          },
          "quality_distribution": {
            "acceptable_pct": 34.7,
            "excellent_pct": 19.8,
            "good_pct": 29.8,
            "problematic_pct": 15.8
          },
          "summary": {
            "acceptable": 156,
            "excellent": 89,
            "good": 134,
            "negative": 8,
            "poor": 45,
            "total_questions_with_data": 450,
            "very_poor": 18
          },
          "trends": {
            "mean_discrimination_30d": 0.32,
            "new_negative_this_week": 2
          }
        }
      },
      "DiscriminationSummary": {
        "properties": {
          "total_questions_with_data": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Total Questions With Data",
            "description": "Total questions with sufficient response data for discrimination analysis"
          },
          "excellent": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Excellent",
            "description": "Questions with discrimination > 0.40"
          },
          "good": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Good",
            "description": "Questions with discrimination 0.30-0.40"
          },
          "acceptable": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Acceptable",
            "description": "Questions with discrimination 0.20-0.30"
          },
          "poor": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Poor",
            "description": "Questions with discrimination 0.10-0.20"
          },
          "very_poor": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Very Poor",
            "description": "Questions with discrimination 0.00-0.10"
          },
          "negative": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Negative",
            "description": "Questions with discrimination < 0.00"
          }
        },
        "type": "object",
        "required": [
          "total_questions_with_data",
          "excellent",
          "good",
          "acceptable",
          "poor",
          "very_poor",
          "negative"
        ],
        "title": "DiscriminationSummary",
        "description": "Summary counts by quality tier."
      },
      "DiscriminationTrends": {
        "properties": {
          "mean_discrimination_30d": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Mean Discrimination 30D",
            "description": "Mean discrimination across questions recalculated in last 30 days"
          },
          "new_negative_this_week": {
            "type": "integer",
            "minimum": 0.0,
            "title": "New Negative This Week",
            "description": "Number of questions newly flagged for negative discrimination this week"
          }
        },
        "type": "object",
        "required": [
          "new_negative_this_week"
        ],
        "title": "DiscriminationTrends",
        "description": "Trend information for discrimination analysis."
      },
      "DistractorAnalysisResponse": {
        "properties": {
          "question_id": {
            "type": "integer",
            "title": "Question Id",
            "description": "Unique identifier of the question"
          },
          "question_text": {
            "type": "string",
            "title": "Question Text",
            "description": "The question text"
          },
          "total_responses": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Total Responses",
            "description": "Total number of responses analyzed"
          },
          "correct_answer": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Correct Answer",
            "description": "The correct answer for this question"
          },
          "options": {
            "items": {
              "$ref": "#/components/schemas/DistractorOptionAnalysis"
            },
            "type": "array",
            "title": "Options",
            "description": "Analysis for each answer option"
          },
          "summary": {
            "$ref": "#/components/schemas/DistractorSummary",
            "description": "Summary statistics for distractor effectiveness"
          },
          "recommendations": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Recommendations",
            "description": "Actionable recommendations for improving distractors"
          }
        },
        "type": "object",
        "required": [
          "question_id",
          "question_text",
          "total_responses",
          "options",
          "summary",
          "recommendations"
        ],
        "title": "DistractorAnalysisResponse",
        "description": "Response schema for GET /v1/admin/questions/{id}/distractor-analysis.\n\nProvides detailed distractor effectiveness analysis for a single question.",
        "example": {
          "correct_answer": "32",
          "options": [
            {
              "bottom_quartile_rate": 0.23,
              "discrimination": "good",
              "discrimination_index": 0.15,
              "is_correct": false,
              "option_key": "A",
              "selection_rate": 0.12,
              "status": "functioning",
              "top_quartile_rate": 0.08
            },
            {
              "bottom_quartile_rate": 0.5,
              "discrimination": "inverted",
              "discrimination_index": -0.35,
              "is_correct": true,
              "option_key": "B",
              "selection_rate": 0.72,
              "status": "functioning",
              "top_quartile_rate": 0.85
            },
            {
              "bottom_quartile_rate": 0.03,
              "discrimination": "neutral",
              "discrimination_index": 0.02,
              "is_correct": false,
              "option_key": "C",
              "selection_rate": 0.01,
              "status": "non-functioning",
              "top_quartile_rate": 0.01
            },
            {
              "bottom_quartile_rate": 0.26,
              "discrimination": "good",
              "discrimination_index": 0.2,
              "is_correct": false,
              "option_key": "D",
              "selection_rate": 0.15,
              "status": "functioning",
              "top_quartile_rate": 0.06
            }
          ],
          "question_id": 123,
          "question_text": "What is the next number in the sequence: 2, 4, 8, 16, ?",
          "recommendations": [
            "Option 'C' is non-functioning (selected by only 1.0% of respondents). Consider revising or replacing."
          ],
          "summary": {
            "effective_option_count": 2.1,
            "functioning_distractors": 2,
            "guessing_probability": 0.48,
            "inverted_distractors": 0,
            "non_functioning_distractors": 1,
            "weak_distractors": 0
          },
          "total_responses": 234
        }
      },
      "DistractorDiscrimination": {
        "type": "string",
        "enum": [
          "good",
          "neutral",
          "inverted"
        ],
        "title": "DistractorDiscrimination",
        "description": "Discrimination classification for a distractor."
      },
      "DistractorOptionAnalysis": {
        "properties": {
          "option_key": {
            "type": "string",
            "title": "Option Key",
            "description": "The option identifier (e.g., 'A', 'B', 'C', 'D')"
          },
          "is_correct": {
            "type": "boolean",
            "title": "Is Correct",
            "description": "Whether this is the correct answer"
          },
          "selection_rate": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Selection Rate",
            "description": "Proportion of respondents who selected this option (0.0-1.0)"
          },
          "status": {
            "$ref": "#/components/schemas/DistractorStatus",
            "description": "Status classification based on selection rate"
          },
          "discrimination": {
            "$ref": "#/components/schemas/DistractorDiscrimination",
            "description": "Discrimination classification based on quartile analysis"
          },
          "discrimination_index": {
            "type": "number",
            "maximum": 1.0,
            "minimum": -1.0,
            "title": "Discrimination Index",
            "description": "Discrimination index: bottom_quartile_rate - top_quartile_rate"
          },
          "top_quartile_rate": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Top Quartile Rate",
            "description": "Selection rate among top 25% scorers"
          },
          "bottom_quartile_rate": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Bottom Quartile Rate",
            "description": "Selection rate among bottom 25% scorers"
          }
        },
        "type": "object",
        "required": [
          "option_key",
          "is_correct",
          "selection_rate",
          "status",
          "discrimination",
          "discrimination_index",
          "top_quartile_rate",
          "bottom_quartile_rate"
        ],
        "title": "DistractorOptionAnalysis",
        "description": "Analysis of a single answer option (distractor or correct answer)."
      },
      "DistractorStatus": {
        "type": "string",
        "enum": [
          "functioning",
          "weak",
          "non-functioning"
        ],
        "title": "DistractorStatus",
        "description": "Status classification for a distractor based on selection rate."
      },
      "DistractorSummary": {
        "properties": {
          "functioning_distractors": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Functioning Distractors",
            "description": "Number of distractors with >=5% selection rate"
          },
          "weak_distractors": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Weak Distractors",
            "description": "Number of distractors with 2-5% selection rate"
          },
          "non_functioning_distractors": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Non Functioning Distractors",
            "description": "Number of distractors with <2% selection rate"
          },
          "inverted_distractors": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Inverted Distractors",
            "description": "Number of distractors where high scorers select more than low scorers"
          },
          "effective_option_count": {
            "type": "number",
            "minimum": 0.0,
            "title": "Effective Option Count",
            "description": "Effective number of options using inverse Simpson index"
          },
          "guessing_probability": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Guessing Probability",
            "description": "Probability of guessing correctly (1 / effective_option_count)"
          }
        },
        "type": "object",
        "required": [
          "functioning_distractors",
          "weak_distractors",
          "non_functioning_distractors",
          "inverted_distractors",
          "effective_option_count",
          "guessing_probability"
        ],
        "title": "DistractorSummary",
        "description": "Summary statistics for distractor analysis."
      },
      "DistractorSummaryResponse": {
        "properties": {
          "total_questions_analyzed": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Total Questions Analyzed",
            "description": "Total multiple-choice questions with sufficient data for analysis"
          },
          "questions_with_non_functioning_distractors": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Questions With Non Functioning Distractors",
            "description": "Questions with at least one non-functioning distractor (<2% selection)"
          },
          "questions_with_inverted_distractors": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Questions With Inverted Distractors",
            "description": "Questions with at least one inverted distractor (high scorers prefer)"
          },
          "non_functioning_rate": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Non Functioning Rate",
            "description": "Proportion of questions with non-functioning distractors"
          },
          "inverted_rate": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Inverted Rate",
            "description": "Proportion of questions with inverted distractors"
          },
          "by_non_functioning_count": {
            "$ref": "#/components/schemas/NonFunctioningCountBreakdown",
            "description": "Breakdown of questions by number of non-functioning distractors"
          },
          "worst_offenders": {
            "items": {
              "$ref": "#/components/schemas/WorstOffenderQuestion"
            },
            "type": "array",
            "title": "Worst Offenders",
            "description": "Top 10 questions with most distractor issues (sorted by severity)"
          },
          "by_question_type": {
            "type": "object",
            "title": "By Question Type",
            "description": "Distractor statistics grouped by question type"
          },
          "avg_effective_option_count": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Avg Effective Option Count",
            "description": "Average effective option count across all analyzed questions"
          },
          "questions_below_threshold": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Questions Below Threshold",
            "description": "Questions with insufficient responses for analysis"
          }
        },
        "type": "object",
        "required": [
          "total_questions_analyzed",
          "questions_with_non_functioning_distractors",
          "questions_with_inverted_distractors",
          "non_functioning_rate",
          "inverted_rate",
          "by_non_functioning_count",
          "worst_offenders",
          "by_question_type",
          "questions_below_threshold"
        ],
        "title": "DistractorSummaryResponse",
        "description": "Response schema for GET /v1/admin/questions/distractor-summary.\n\nProvides aggregate distractor effectiveness statistics across all\nmultiple-choice questions with sufficient response data.",
        "example": {
          "avg_effective_option_count": 3.1,
          "by_non_functioning_count": {
            "one": 52,
            "three_or_more": 3,
            "two": 12,
            "zero": 383
          },
          "by_question_type": {
            "logic": {
              "avg_effective_options": 3.4,
              "questions_with_issues": 10,
              "total_questions": 80
            },
            "pattern": {
              "avg_effective_options": 3.2,
              "questions_with_issues": 15,
              "total_questions": 100
            }
          },
          "inverted_rate": 0.027,
          "non_functioning_rate": 0.149,
          "questions_below_threshold": 25,
          "questions_with_inverted_distractors": 12,
          "questions_with_non_functioning_distractors": 67,
          "total_questions_analyzed": 450,
          "worst_offenders": [
            {
              "difficulty_level": "medium",
              "effective_option_count": 1.2,
              "inverted_count": 1,
              "non_functioning_count": 3,
              "question_id": 123,
              "question_type": "pattern",
              "total_responses": 156
            }
          ]
        }
      },
      "DomainWeightsRequest": {
        "properties": {
          "weights": {
            "additionalProperties": {
              "type": "number"
            },
            "type": "object",
            "title": "Weights",
            "description": "Domain weights. Keys should be domain names (pattern, logic, spatial, math, verbal, memory). Values should be positive floats that ideally sum to 1.0.",
            "examples": [
              {
                "logic": 0.18,
                "math": 0.17,
                "memory": 0.14,
                "pattern": 0.2,
                "spatial": 0.16,
                "verbal": 0.15
              }
            ]
          }
        },
        "type": "object",
        "required": [
          "weights"
        ],
        "title": "DomainWeightsRequest",
        "description": "Request model for setting domain weights."
      },
      "DomainWeightsResponse": {
        "properties": {
          "weights": {
            "additionalProperties": {
              "type": "number"
            },
            "type": "object",
            "title": "Weights",
            "description": "The configured domain weights"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Human-readable message describing the operation result"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At",
            "description": "When the weights were updated"
          }
        },
        "type": "object",
        "required": [
          "weights",
          "message",
          "updated_at"
        ],
        "title": "DomainWeightsResponse",
        "description": "Response model for domain weights configuration."
      },
      "EducationLevelSchema": {
        "type": "string",
        "enum": [
          "high_school",
          "some_college",
          "associates",
          "bachelors",
          "masters",
          "doctorate",
          "prefer_not_to_say"
        ],
        "title": "EducationLevelSchema",
        "description": "Education level enumeration for API schemas."
      },
      "FactorAnalysisRecommendation": {
        "properties": {
          "category": {
            "type": "string",
            "title": "Category",
            "description": "Category of recommendation (e.g., 'sample_size', 'reliability', 'loadings')"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Human-readable recommendation message"
          },
          "severity": {
            "type": "string",
            "title": "Severity",
            "description": "Severity level: 'info', 'warning', or 'critical'"
          }
        },
        "type": "object",
        "required": [
          "category",
          "message",
          "severity"
        ],
        "title": "FactorAnalysisRecommendation",
        "description": "Recommendation based on factor analysis results."
      },
      "FactorAnalysisResponse": {
        "properties": {
          "analysis_date": {
            "type": "string",
            "format": "date-time",
            "title": "Analysis Date",
            "description": "Timestamp when the analysis was performed"
          },
          "sample_size": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Sample Size",
            "description": "Number of completed test sessions used in the analysis"
          },
          "n_items": {
            "type": "integer",
            "minimum": 0.0,
            "title": "N Items",
            "description": "Number of questions included in the analysis"
          },
          "g_loadings": {
            "additionalProperties": {
              "type": "number"
            },
            "type": "object",
            "title": "G Loadings",
            "description": "G-loading for each domain (domain name -> loading value)"
          },
          "variance_explained": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Variance Explained",
            "description": "Proportion of total variance explained by the g-factor (0-1)"
          },
          "reliability": {
            "$ref": "#/components/schemas/ReliabilityMetrics",
            "description": "Reliability metrics for the analysis"
          },
          "recommendations": {
            "items": {
              "$ref": "#/components/schemas/FactorAnalysisRecommendation"
            },
            "type": "array",
            "title": "Recommendations",
            "description": "Recommendations based on the analysis results"
          },
          "warnings": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Warnings",
            "description": "Warnings generated during the analysis"
          }
        },
        "type": "object",
        "required": [
          "analysis_date",
          "sample_size",
          "n_items",
          "g_loadings",
          "variance_explained",
          "reliability"
        ],
        "title": "FactorAnalysisResponse",
        "description": "Response schema for GET /v1/admin/analytics/factor-analysis.\n\nProvides comprehensive factor analysis results including g-loadings\nper domain, variance explained, and reliability metrics.",
        "example": {
          "analysis_date": "2025-12-06T12:00:00Z",
          "g_loadings": {
            "logical_reasoning": 0.68,
            "mathematical": 0.65,
            "memory": 0.52,
            "pattern_recognition": 0.72,
            "spatial_reasoning": 0.61,
            "verbal_reasoning": 0.58
          },
          "n_items": 200,
          "recommendations": [
            {
              "category": "loadings",
              "message": "Pattern recognition shows highest g-loading (0.72). Consider weighting this domain more heavily.",
              "severity": "info"
            }
          ],
          "reliability": {
            "cronbachs_alpha": 0.78
          },
          "sample_size": 850,
          "variance_explained": 0.45,
          "warnings": []
        }
      },
      "FeedbackCategorySchema": {
        "type": "string",
        "enum": [
          "bug_report",
          "feature_request",
          "general_feedback",
          "question_help",
          "other"
        ],
        "title": "FeedbackCategorySchema",
        "description": "Feedback category enumeration for API schemas."
      },
      "FeedbackSubmitRequest": {
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Name",
            "description": "Name of person submitting feedback"
          },
          "email": {
            "type": "string",
            "format": "email",
            "title": "Email",
            "description": "Email address for follow-up"
          },
          "category": {
            "$ref": "#/components/schemas/FeedbackCategorySchema",
            "description": "Feedback category"
          },
          "description": {
            "type": "string",
            "maxLength": 5000,
            "minLength": 10,
            "title": "Description",
            "description": "Detailed feedback description"
          }
        },
        "type": "object",
        "required": [
          "name",
          "email",
          "category",
          "description"
        ],
        "title": "FeedbackSubmitRequest",
        "description": "Schema for feedback submission request."
      },
      "FeedbackSubmitResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether submission was successful"
          },
          "submission_id": {
            "type": "integer",
            "title": "Submission Id",
            "description": "ID of the created feedback submission"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Success message"
          }
        },
        "type": "object",
        "required": [
          "success",
          "submission_id",
          "message"
        ],
        "title": "FeedbackSubmitResponse",
        "description": "Schema for feedback submission response.",
        "example": {
          "message": "Thank you for your feedback! We'll review it shortly.",
          "submission_id": 42,
          "success": true
        }
      },
      "FlagSource": {
        "type": "string",
        "enum": [
          "person_fit",
          "time_check",
          "guttman_check"
        ],
        "title": "FlagSource",
        "description": "Source of a validity flag (which analysis generated it)."
      },
      "FlagTypeBreakdown": {
        "properties": {
          "aberrant_response_pattern": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Aberrant Response Pattern",
            "description": "Sessions with aberrant person-fit pattern",
            "default": 0
          },
          "multiple_rapid_responses": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Multiple Rapid Responses",
            "description": "Sessions with multiple rapid responses (<3s)",
            "default": 0
          },
          "suspiciously_fast_on_hard": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Suspiciously Fast On Hard",
            "description": "Sessions with suspiciously fast correct hard answers",
            "default": 0
          },
          "extended_pauses": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Extended Pauses",
            "description": "Sessions with extended pauses (>5 min)",
            "default": 0
          },
          "total_time_too_fast": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Total Time Too Fast",
            "description": "Sessions completed too quickly (<5 min total)",
            "default": 0
          },
          "total_time_excessive": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Total Time Excessive",
            "description": "Sessions taking too long (>2 hours)",
            "default": 0
          },
          "high_guttman_errors": {
            "type": "integer",
            "minimum": 0.0,
            "title": "High Guttman Errors",
            "description": "Sessions with high Guttman error rate (>30%)",
            "default": 0
          },
          "elevated_guttman_errors": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Elevated Guttman Errors",
            "description": "Sessions with elevated Guttman error rate (20-30%)",
            "default": 0
          }
        },
        "type": "object",
        "title": "FlagTypeBreakdown",
        "description": "Counts of each flag type detected across sessions."
      },
      "GenerationRunStatusSchema": {
        "type": "string",
        "enum": [
          "running",
          "success",
          "partial_failure",
          "failed"
        ],
        "title": "GenerationRunStatusSchema",
        "description": "Status enumeration for question generation runs."
      },
      "GuttmanCheckDetails": {
        "properties": {
          "error_count": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Error Count",
            "description": "Number of Guttman errors detected"
          },
          "max_possible_errors": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Max Possible Errors",
            "description": "Maximum possible errors for this response pattern"
          },
          "error_rate": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Error Rate",
            "description": "Error rate (error_count / max_possible_errors)"
          },
          "interpretation": {
            "type": "string",
            "title": "Interpretation",
            "description": "Classification: 'normal', 'elevated_errors', or 'high_errors_aberrant'"
          },
          "total_responses": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Total Responses",
            "description": "Number of responses analyzed"
          },
          "correct_count": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Correct Count",
            "description": "Number of correct responses"
          },
          "incorrect_count": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Incorrect Count",
            "description": "Number of incorrect responses"
          },
          "details": {
            "type": "string",
            "title": "Details",
            "description": "Human-readable explanation"
          }
        },
        "type": "object",
        "required": [
          "error_count",
          "max_possible_errors",
          "error_rate",
          "interpretation",
          "total_responses",
          "correct_count",
          "incorrect_count",
          "details"
        ],
        "title": "GuttmanCheckDetails",
        "description": "Detailed results from Guttman error detection."
      },
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "type": "array",
            "title": "Detail"
          }
        },
        "type": "object",
        "title": "HTTPValidationError"
      },
      "InsufficientSampleResponse": {
        "properties": {
          "error": {
            "type": "string",
            "title": "Error",
            "description": "Error code for insufficient sample size",
            "default": "insufficient_sample"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Human-readable error message"
          },
          "sample_size": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Sample Size",
            "description": "Current sample size"
          },
          "minimum_required": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Minimum Required",
            "description": "Minimum sample size required for analysis"
          },
          "recommendation": {
            "type": "string",
            "title": "Recommendation",
            "description": "Recommendation for when to retry"
          }
        },
        "type": "object",
        "required": [
          "message",
          "sample_size",
          "minimum_required",
          "recommendation"
        ],
        "title": "InsufficientSampleResponse",
        "description": "Error response when sample size is insufficient for factor analysis.",
        "example": {
          "error": "insufficient_sample",
          "message": "Sample size (250) is below minimum (500) required for reliable factor analysis.",
          "minimum_required": 500,
          "recommendation": "Approximately 250 more completed test sessions are needed before factor analysis can be performed.",
          "sample_size": 250
        }
      },
      "InternalConsistencyMetrics": {
        "properties": {
          "cronbachs_alpha": {
            "anyOf": [
              {
                "type": "number",
                "maximum": 1.0,
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Cronbachs Alpha",
            "description": "Cronbach's alpha coefficient (0.0-1.0). None if insufficient data."
          },
          "interpretation": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/ReliabilityInterpretation"
              },
              {
                "type": "null"
              }
            ],
            "description": "Interpretation of alpha value: excellent (>=0.90), good (>=0.80), acceptable (>=0.70), questionable (>=0.60), poor (>=0.50), unacceptable (<0.50)"
          },
          "meets_threshold": {
            "type": "boolean",
            "title": "Meets Threshold",
            "description": "Whether alpha meets the minimum acceptable threshold (>= 0.70)"
          },
          "num_sessions": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Num Sessions",
            "description": "Number of test sessions used in the calculation"
          },
          "num_items": {
            "anyOf": [
              {
                "type": "integer",
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Num Items",
            "description": "Number of test items (questions) included in the analysis"
          },
          "last_calculated": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Calculated",
            "description": "Timestamp when this metric was last calculated"
          },
          "item_total_correlations": {
            "anyOf": [
              {
                "additionalProperties": {
                  "type": "number"
                },
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Item Total Correlations",
            "description": "Item-total correlations by question_id. Shows each item's contribution to overall reliability."
          }
        },
        "type": "object",
        "required": [
          "meets_threshold",
          "num_sessions"
        ],
        "title": "InternalConsistencyMetrics",
        "description": "Metrics for internal consistency (Cronbach's alpha).\n\nCronbach's alpha measures how well test items measure the same construct.\nValues range from 0 to 1, with higher values indicating better consistency."
      },
      "MetricType": {
        "type": "string",
        "enum": [
          "cronbachs_alpha",
          "test_retest",
          "split_half"
        ],
        "title": "MetricType",
        "description": "Type of reliability metric stored in the database."
      },
      "MiscalibratedQuestion": {
        "properties": {
          "question_id": {
            "type": "integer",
            "title": "Question Id",
            "description": "Unique identifier of the question"
          },
          "assigned_difficulty": {
            "type": "string",
            "title": "Assigned Difficulty",
            "description": "AI-assigned difficulty label (easy, medium, hard)"
          },
          "empirical_difficulty": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Empirical Difficulty",
            "description": "Empirical p-value (proportion of users answering correctly)"
          },
          "expected_range": {
            "items": {
              "type": "number"
            },
            "type": "array",
            "maxItems": 2,
            "minItems": 2,
            "title": "Expected Range",
            "description": "Expected p-value range for assigned difficulty [min, max]"
          },
          "suggested_label": {
            "type": "string",
            "title": "Suggested Label",
            "description": "Recommended difficulty label based on empirical data"
          },
          "response_count": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Response Count",
            "description": "Number of responses used to calculate empirical difficulty"
          },
          "severity": {
            "$ref": "#/components/schemas/app__schemas__calibration__SeverityLevel",
            "description": "Severity of miscalibration (minor, major, severe)"
          }
        },
        "type": "object",
        "required": [
          "question_id",
          "assigned_difficulty",
          "empirical_difficulty",
          "expected_range",
          "suggested_label",
          "response_count",
          "severity"
        ],
        "title": "MiscalibratedQuestion",
        "description": "Details of a miscalibrated question."
      },
      "NonFunctioningCountBreakdown": {
        "properties": {
          "zero": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Zero",
            "description": "Questions with 0 non-functioning distractors"
          },
          "one": {
            "type": "integer",
            "minimum": 0.0,
            "title": "One",
            "description": "Questions with 1 non-functioning distractor"
          },
          "two": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Two",
            "description": "Questions with 2 non-functioning distractors"
          },
          "three_or_more": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Three Or More",
            "description": "Questions with 3+ non-functioning distractors"
          }
        },
        "type": "object",
        "required": [
          "zero",
          "one",
          "two",
          "three_or_more"
        ],
        "title": "NonFunctioningCountBreakdown",
        "description": "Breakdown of questions by number of non-functioning distractors."
      },
      "NotificationPreferences": {
        "properties": {
          "notification_enabled": {
            "type": "boolean",
            "title": "Notification Enabled",
            "description": "Enable or disable push notifications"
          }
        },
        "type": "object",
        "required": [
          "notification_enabled"
        ],
        "title": "NotificationPreferences",
        "description": "Schema for updating notification preferences."
      },
      "NotificationPreferencesResponse": {
        "properties": {
          "notification_enabled": {
            "type": "boolean",
            "title": "Notification Enabled",
            "description": "Current notification preference"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Response message"
          }
        },
        "type": "object",
        "required": [
          "notification_enabled",
          "message"
        ],
        "title": "NotificationPreferencesResponse",
        "description": "Schema for notification preferences response."
      },
      "OverallStatus": {
        "type": "string",
        "enum": [
          "excellent",
          "acceptable",
          "needs_attention",
          "insufficient_data"
        ],
        "title": "OverallStatus",
        "description": "Overall reliability status for the test."
      },
      "OverallTimeStats": {
        "properties": {
          "mean_test_duration_seconds": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Mean Test Duration Seconds",
            "description": "Mean total test duration in seconds"
          },
          "median_test_duration_seconds": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Median Test Duration Seconds",
            "description": "Median total test duration in seconds"
          },
          "mean_per_question_seconds": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Mean Per Question Seconds",
            "description": "Mean time per question across all responses"
          }
        },
        "type": "object",
        "title": "OverallTimeStats",
        "description": "Overall response time statistics across all sessions."
      },
      "PaginatedTestHistoryResponse": {
        "properties": {
          "results": {
            "items": {
              "$ref": "#/components/schemas/TestResultResponse"
            },
            "type": "array",
            "title": "Results",
            "description": "List of test results for the current page"
          },
          "total_count": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Total Count",
            "description": "Total number of test results available for this user"
          },
          "limit": {
            "type": "integer",
            "maximum": 100.0,
            "minimum": 1.0,
            "title": "Limit",
            "description": "Number of results per page (max 100)"
          },
          "offset": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Offset",
            "description": "Offset from the start of the results"
          },
          "has_more": {
            "type": "boolean",
            "title": "Has More",
            "description": "Whether there are more results beyond this page"
          }
        },
        "type": "object",
        "required": [
          "results",
          "total_count",
          "limit",
          "offset",
          "has_more"
        ],
        "title": "PaginatedTestHistoryResponse",
        "description": "Schema for paginated test history results.\n\nIncludes pagination metadata to support UI pagination controls."
      },
      "PersonFitDetails": {
        "properties": {
          "fit_ratio": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Fit Ratio",
            "description": "Proportion of unexpected responses (0.0-1.0)"
          },
          "fit_flag": {
            "type": "string",
            "title": "Fit Flag",
            "description": "Classification: 'normal' or 'aberrant'"
          },
          "unexpected_correct": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Unexpected Correct",
            "description": "Hard questions answered correctly when expected wrong"
          },
          "unexpected_incorrect": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Unexpected Incorrect",
            "description": "Easy questions answered incorrectly when expected right"
          },
          "total_responses": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Total Responses",
            "description": "Total responses analyzed"
          },
          "score_percentile": {
            "type": "string",
            "title": "Score Percentile",
            "description": "Score category: 'high', 'medium', or 'low'"
          },
          "details": {
            "type": "string",
            "title": "Details",
            "description": "Human-readable explanation"
          }
        },
        "type": "object",
        "required": [
          "fit_ratio",
          "fit_flag",
          "unexpected_correct",
          "unexpected_incorrect",
          "total_responses",
          "score_percentile",
          "details"
        ],
        "title": "PersonFitDetails",
        "description": "Detailed results from person-fit heuristic analysis."
      },
      "PipelineLosses": {
        "properties": {
          "generation_loss": {
            "type": "integer",
            "title": "Generation Loss",
            "description": "Questions lost during generation (requested - generated)"
          },
          "evaluation_loss": {
            "type": "integer",
            "title": "Evaluation Loss",
            "description": "Questions lost due to not being evaluated (generated - evaluated)"
          },
          "rejection_loss": {
            "type": "integer",
            "title": "Rejection Loss",
            "description": "Questions rejected by arbiter (evaluated - approved)"
          },
          "deduplication_loss": {
            "type": "integer",
            "title": "Deduplication Loss",
            "description": "Questions removed as duplicates"
          },
          "insertion_loss": {
            "type": "integer",
            "title": "Insertion Loss",
            "description": "Questions lost during database insertion (approved - duplicates - inserted)"
          },
          "total_loss": {
            "type": "integer",
            "title": "Total Loss",
            "description": "Total questions lost across all stages (requested - inserted)"
          },
          "generation_loss_pct": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Generation Loss Pct",
            "description": "Generation loss as percentage of requested"
          },
          "evaluation_loss_pct": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Evaluation Loss Pct",
            "description": "Evaluation loss as percentage of generated"
          },
          "rejection_loss_pct": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Rejection Loss Pct",
            "description": "Rejection loss as percentage of evaluated"
          },
          "deduplication_loss_pct": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Deduplication Loss Pct",
            "description": "Deduplication loss as percentage of approved"
          },
          "insertion_loss_pct": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Insertion Loss Pct",
            "description": "Insertion loss as percentage of (approved - duplicates)"
          }
        },
        "type": "object",
        "required": [
          "generation_loss",
          "evaluation_loss",
          "rejection_loss",
          "deduplication_loss",
          "insertion_loss",
          "total_loss"
        ],
        "title": "PipelineLosses",
        "description": "Schema for tracking questions lost at each stage of the generation pipeline.\n\nThis provides insights into where questions are being lost during the\ngeneration process, helping identify bottlenecks and optimization opportunities."
      },
      "QualityDistribution": {
        "properties": {
          "excellent_pct": {
            "type": "number",
            "maximum": 100.0,
            "minimum": 0.0,
            "title": "Excellent Pct",
            "description": "Percentage of questions with excellent discrimination"
          },
          "good_pct": {
            "type": "number",
            "maximum": 100.0,
            "minimum": 0.0,
            "title": "Good Pct",
            "description": "Percentage of questions with good discrimination"
          },
          "acceptable_pct": {
            "type": "number",
            "maximum": 100.0,
            "minimum": 0.0,
            "title": "Acceptable Pct",
            "description": "Percentage of questions with acceptable discrimination"
          },
          "problematic_pct": {
            "type": "number",
            "maximum": 100.0,
            "minimum": 0.0,
            "title": "Problematic Pct",
            "description": "Percentage of questions with poor, very poor, or negative discrimination"
          }
        },
        "type": "object",
        "required": [
          "excellent_pct",
          "good_pct",
          "acceptable_pct",
          "problematic_pct"
        ],
        "title": "QualityDistribution",
        "description": "Percentage distribution of quality tiers."
      },
      "QualityFlagUpdateRequest": {
        "properties": {
          "quality_flag": {
            "type": "string",
            "enum": [
              "normal",
              "under_review",
              "deactivated"
            ],
            "title": "Quality Flag"
          },
          "reason": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Reason"
          }
        },
        "type": "object",
        "required": [
          "quality_flag"
        ],
        "title": "QualityFlagUpdateRequest",
        "description": "Request model for updating a question's quality flag."
      },
      "QualityFlagUpdateResponse": {
        "properties": {
          "question_id": {
            "type": "integer",
            "title": "Question Id"
          },
          "previous_flag": {
            "type": "string",
            "title": "Previous Flag"
          },
          "new_flag": {
            "type": "string",
            "title": "New Flag"
          },
          "reason": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Reason"
          },
          "updated_at": {
            "type": "string",
            "title": "Updated At"
          }
        },
        "type": "object",
        "required": [
          "question_id",
          "previous_flag",
          "new_flag",
          "reason",
          "updated_at"
        ],
        "title": "QualityFlagUpdateResponse",
        "description": "Response model for quality flag update."
      },
      "QualityTier": {
        "type": "string",
        "enum": [
          "excellent",
          "good",
          "acceptable",
          "poor",
          "very_poor",
          "negative"
        ],
        "title": "QualityTier",
        "description": "Quality tier classification based on discrimination value."
      },
      "QuestionGenerationRunCreate": {
        "properties": {
          "started_at": {
            "type": "string",
            "format": "date-time",
            "title": "Started At",
            "description": "When the generation run started"
          },
          "completed_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Completed At",
            "description": "When the generation run completed (null if still running)"
          },
          "duration_seconds": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Duration Seconds",
            "description": "Total duration in seconds (null if still running)"
          },
          "status": {
            "$ref": "#/components/schemas/GenerationRunStatusSchema",
            "description": "Run status: running, success, partial_failure, or failed"
          },
          "exit_code": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Exit Code",
            "description": "Exit code (0-6 matching run_generation.py codes)"
          },
          "questions_requested": {
            "type": "integer",
            "title": "Questions Requested",
            "description": "Number of questions requested"
          },
          "questions_generated": {
            "type": "integer",
            "title": "Questions Generated",
            "description": "Number of questions generated",
            "default": 0
          },
          "generation_failures": {
            "type": "integer",
            "title": "Generation Failures",
            "description": "Number of generation failures",
            "default": 0
          },
          "generation_success_rate": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Generation Success Rate",
            "description": "Generation success rate (0.0-1.0)"
          },
          "questions_evaluated": {
            "type": "integer",
            "title": "Questions Evaluated",
            "description": "Questions evaluated by arbiter",
            "default": 0
          },
          "questions_approved": {
            "type": "integer",
            "title": "Questions Approved",
            "description": "Questions approved by arbiter",
            "default": 0
          },
          "questions_rejected": {
            "type": "integer",
            "title": "Questions Rejected",
            "description": "Questions rejected by arbiter",
            "default": 0
          },
          "approval_rate": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Approval Rate",
            "description": "Approval rate (0.0-1.0)"
          },
          "avg_arbiter_score": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Avg Arbiter Score",
            "description": "Average arbiter score"
          },
          "min_arbiter_score": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Min Arbiter Score",
            "description": "Minimum arbiter score"
          },
          "max_arbiter_score": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Max Arbiter Score",
            "description": "Maximum arbiter score"
          },
          "duplicates_found": {
            "type": "integer",
            "title": "Duplicates Found",
            "description": "Total duplicates found",
            "default": 0
          },
          "exact_duplicates": {
            "type": "integer",
            "title": "Exact Duplicates",
            "description": "Exact text duplicates found",
            "default": 0
          },
          "semantic_duplicates": {
            "type": "integer",
            "title": "Semantic Duplicates",
            "description": "Semantic duplicates found",
            "default": 0
          },
          "duplicate_rate": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Duplicate Rate",
            "description": "Duplicate rate (0.0-1.0)"
          },
          "questions_inserted": {
            "type": "integer",
            "title": "Questions Inserted",
            "description": "Questions inserted into database",
            "default": 0
          },
          "insertion_failures": {
            "type": "integer",
            "title": "Insertion Failures",
            "description": "Database insertion failures",
            "default": 0
          },
          "overall_success_rate": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Overall Success Rate",
            "description": "Overall success rate (questions_inserted / questions_requested)"
          },
          "total_errors": {
            "type": "integer",
            "title": "Total Errors",
            "description": "Total errors encountered",
            "default": 0
          },
          "total_api_calls": {
            "type": "integer",
            "title": "Total Api Calls",
            "description": "Total API calls across all providers",
            "default": 0
          },
          "provider_metrics": {
            "anyOf": [
              {
                "additionalProperties": {
                  "type": "object"
                },
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Provider Metrics",
            "description": "Per-provider metrics breakdown. Example: {\"openai\": {\"generated\": 10, \"api_calls\": 15}}"
          },
          "type_metrics": {
            "anyOf": [
              {
                "additionalProperties": {
                  "type": "integer"
                },
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Type Metrics",
            "description": "Questions generated per type. Example: {\"pattern_recognition\": 8, \"logical_reasoning\": 12}"
          },
          "difficulty_metrics": {
            "anyOf": [
              {
                "additionalProperties": {
                  "type": "integer"
                },
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Difficulty Metrics",
            "description": "Questions generated per difficulty. Example: {\"easy\": 15, \"medium\": 22, \"hard\": 13}"
          },
          "error_summary": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error Summary",
            "description": "Error breakdown. Example: {\"by_category\": {\"rate_limit\": 2}, \"critical_count\": 0}"
          },
          "prompt_version": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 50
              },
              {
                "type": "null"
              }
            ],
            "title": "Prompt Version",
            "description": "Prompt version used"
          },
          "arbiter_config_version": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 50
              },
              {
                "type": "null"
              }
            ],
            "title": "Arbiter Config Version",
            "description": "Arbiter config version used"
          },
          "min_arbiter_score_threshold": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Min Arbiter Score Threshold",
            "description": "Minimum arbiter score threshold for approval"
          },
          "environment": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 20
              },
              {
                "type": "null"
              }
            ],
            "title": "Environment",
            "description": "Environment: production, staging, or development"
          },
          "triggered_by": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 50
              },
              {
                "type": "null"
              }
            ],
            "title": "Triggered By",
            "description": "Trigger source: scheduler, manual, or webhook"
          }
        },
        "type": "object",
        "required": [
          "started_at",
          "status",
          "questions_requested"
        ],
        "title": "QuestionGenerationRunCreate",
        "description": "Schema for creating a question generation run record.\n\nUsed by the question-service to report execution metrics to the backend.\nSupports both initial \"running\" status reports and final completion reports."
      },
      "QuestionGenerationRunCreateResponse": {
        "properties": {
          "id": {
            "type": "integer",
            "title": "Id",
            "description": "The created run ID"
          },
          "status": {
            "$ref": "#/components/schemas/GenerationRunStatusSchema",
            "description": "Status of the created run"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Confirmation message"
          }
        },
        "type": "object",
        "required": [
          "id",
          "status",
          "message"
        ],
        "title": "QuestionGenerationRunCreateResponse",
        "description": "Response schema for creating a question generation run record.\n\nReturns the created run ID and status for confirmation."
      },
      "QuestionGenerationRunDetail": {
        "properties": {
          "id": {
            "type": "integer",
            "title": "Id",
            "description": "Run ID"
          },
          "started_at": {
            "type": "string",
            "format": "date-time",
            "title": "Started At",
            "description": "When the generation run started"
          },
          "completed_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Completed At",
            "description": "When the generation run completed"
          },
          "duration_seconds": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Duration Seconds",
            "description": "Total duration in seconds"
          },
          "status": {
            "$ref": "#/components/schemas/GenerationRunStatusSchema",
            "description": "Run status"
          },
          "exit_code": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Exit Code",
            "description": "Exit code"
          },
          "questions_requested": {
            "type": "integer",
            "title": "Questions Requested",
            "description": "Number of questions requested"
          },
          "questions_generated": {
            "type": "integer",
            "title": "Questions Generated",
            "description": "Number of questions generated"
          },
          "generation_failures": {
            "type": "integer",
            "title": "Generation Failures",
            "description": "Number of generation failures"
          },
          "generation_success_rate": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Generation Success Rate",
            "description": "Generation success rate"
          },
          "questions_evaluated": {
            "type": "integer",
            "title": "Questions Evaluated",
            "description": "Questions evaluated by arbiter"
          },
          "questions_approved": {
            "type": "integer",
            "title": "Questions Approved",
            "description": "Questions approved by arbiter"
          },
          "questions_rejected": {
            "type": "integer",
            "title": "Questions Rejected",
            "description": "Questions rejected by arbiter"
          },
          "approval_rate": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Approval Rate",
            "description": "Approval rate"
          },
          "avg_arbiter_score": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Avg Arbiter Score",
            "description": "Average arbiter score"
          },
          "min_arbiter_score": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Min Arbiter Score",
            "description": "Minimum arbiter score"
          },
          "max_arbiter_score": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Max Arbiter Score",
            "description": "Maximum arbiter score"
          },
          "duplicates_found": {
            "type": "integer",
            "title": "Duplicates Found",
            "description": "Total duplicates found"
          },
          "exact_duplicates": {
            "type": "integer",
            "title": "Exact Duplicates",
            "description": "Exact text duplicates found"
          },
          "semantic_duplicates": {
            "type": "integer",
            "title": "Semantic Duplicates",
            "description": "Semantic duplicates found"
          },
          "duplicate_rate": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Duplicate Rate",
            "description": "Duplicate rate"
          },
          "questions_inserted": {
            "type": "integer",
            "title": "Questions Inserted",
            "description": "Questions inserted into database"
          },
          "insertion_failures": {
            "type": "integer",
            "title": "Insertion Failures",
            "description": "Database insertion failures"
          },
          "overall_success_rate": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Overall Success Rate",
            "description": "Overall success rate"
          },
          "total_errors": {
            "type": "integer",
            "title": "Total Errors",
            "description": "Total errors encountered"
          },
          "total_api_calls": {
            "type": "integer",
            "title": "Total Api Calls",
            "description": "Total API calls"
          },
          "provider_metrics": {
            "anyOf": [
              {
                "additionalProperties": {
                  "type": "object"
                },
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Provider Metrics",
            "description": "Per-provider metrics breakdown"
          },
          "type_metrics": {
            "anyOf": [
              {
                "additionalProperties": {
                  "type": "integer"
                },
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Type Metrics",
            "description": "Questions generated per type"
          },
          "difficulty_metrics": {
            "anyOf": [
              {
                "additionalProperties": {
                  "type": "integer"
                },
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Difficulty Metrics",
            "description": "Questions generated per difficulty"
          },
          "error_summary": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error Summary",
            "description": "Error breakdown"
          },
          "prompt_version": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Prompt Version",
            "description": "Prompt version used"
          },
          "arbiter_config_version": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Arbiter Config Version",
            "description": "Arbiter config version used"
          },
          "min_arbiter_score_threshold": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Min Arbiter Score Threshold",
            "description": "Minimum arbiter score threshold"
          },
          "environment": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Environment",
            "description": "Environment"
          },
          "triggered_by": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Triggered By",
            "description": "Trigger source"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "Record creation timestamp"
          },
          "pipeline_losses": {
            "$ref": "#/components/schemas/PipelineLosses",
            "description": "Computed metrics showing questions lost at each pipeline stage"
          }
        },
        "type": "object",
        "required": [
          "id",
          "started_at",
          "status",
          "questions_requested",
          "questions_generated",
          "generation_failures",
          "questions_evaluated",
          "questions_approved",
          "questions_rejected",
          "duplicates_found",
          "exact_duplicates",
          "semantic_duplicates",
          "questions_inserted",
          "insertion_failures",
          "total_errors",
          "total_api_calls",
          "created_at",
          "pipeline_losses"
        ],
        "title": "QuestionGenerationRunDetail",
        "description": "Detailed schema for a single generation run with computed fields.\n\nExtends QuestionGenerationRunRead with computed pipeline loss metrics\nto help analyze where questions are being lost in the generation process."
      },
      "QuestionGenerationRunListResponse": {
        "properties": {
          "runs": {
            "items": {
              "$ref": "#/components/schemas/QuestionGenerationRunSummary"
            },
            "type": "array",
            "title": "Runs",
            "description": "List of generation run summaries"
          },
          "total": {
            "type": "integer",
            "title": "Total",
            "description": "Total number of runs matching filters"
          },
          "page": {
            "type": "integer",
            "title": "Page",
            "description": "Current page number (1-indexed)"
          },
          "page_size": {
            "type": "integer",
            "title": "Page Size",
            "description": "Number of items per page"
          },
          "total_pages": {
            "type": "integer",
            "title": "Total Pages",
            "description": "Total number of pages"
          }
        },
        "type": "object",
        "required": [
          "runs",
          "total",
          "page",
          "page_size",
          "total_pages"
        ],
        "title": "QuestionGenerationRunListResponse",
        "description": "Schema for paginated list of generation runs."
      },
      "QuestionGenerationRunStats": {
        "properties": {
          "period_start": {
            "type": "string",
            "format": "date-time",
            "title": "Period Start",
            "description": "Start of the analysis period"
          },
          "period_end": {
            "type": "string",
            "format": "date-time",
            "title": "Period End",
            "description": "End of the analysis period"
          },
          "total_runs": {
            "type": "integer",
            "title": "Total Runs",
            "description": "Total number of runs in period"
          },
          "successful_runs": {
            "type": "integer",
            "title": "Successful Runs",
            "description": "Runs with status 'success'"
          },
          "failed_runs": {
            "type": "integer",
            "title": "Failed Runs",
            "description": "Runs with status 'failed'"
          },
          "partial_failure_runs": {
            "type": "integer",
            "title": "Partial Failure Runs",
            "description": "Runs with status 'partial_failure'"
          },
          "total_questions_requested": {
            "type": "integer",
            "title": "Total Questions Requested",
            "description": "Total questions requested"
          },
          "total_questions_generated": {
            "type": "integer",
            "title": "Total Questions Generated",
            "description": "Total questions generated"
          },
          "total_questions_inserted": {
            "type": "integer",
            "title": "Total Questions Inserted",
            "description": "Total questions inserted"
          },
          "avg_overall_success_rate": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Avg Overall Success Rate",
            "description": "Average overall success rate"
          },
          "avg_approval_rate": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Avg Approval Rate",
            "description": "Average approval rate"
          },
          "avg_arbiter_score": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Avg Arbiter Score",
            "description": "Average arbiter score"
          },
          "min_arbiter_score": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Min Arbiter Score",
            "description": "Minimum arbiter score across all runs"
          },
          "max_arbiter_score": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Max Arbiter Score",
            "description": "Maximum arbiter score across all runs"
          },
          "total_duplicates_found": {
            "type": "integer",
            "title": "Total Duplicates Found",
            "description": "Total duplicates found"
          },
          "avg_duplicate_rate": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Avg Duplicate Rate",
            "description": "Average duplicate rate"
          },
          "avg_duration_seconds": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Avg Duration Seconds",
            "description": "Average run duration"
          },
          "total_api_calls": {
            "type": "integer",
            "title": "Total Api Calls",
            "description": "Total API calls"
          },
          "avg_api_calls_per_question": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Avg Api Calls Per Question",
            "description": "Average API calls per successfully inserted question"
          },
          "total_errors": {
            "type": "integer",
            "title": "Total Errors",
            "description": "Total errors across all runs"
          },
          "provider_summary": {
            "anyOf": [
              {
                "additionalProperties": {
                  "type": "object"
                },
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Provider Summary",
            "description": "Aggregated metrics per provider. Example: {'openai': {'total_generated': 100, 'avg_success_rate': 0.85}}"
          },
          "success_rate_trend": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Success Rate Trend",
            "description": "Trend direction: improving, declining, or stable"
          },
          "approval_rate_trend": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Approval Rate Trend",
            "description": "Trend direction: improving, declining, or stable"
          }
        },
        "type": "object",
        "required": [
          "period_start",
          "period_end",
          "total_runs",
          "successful_runs",
          "failed_runs",
          "partial_failure_runs",
          "total_questions_requested",
          "total_questions_generated",
          "total_questions_inserted",
          "total_duplicates_found",
          "total_api_calls",
          "total_errors"
        ],
        "title": "QuestionGenerationRunStats",
        "description": "Schema for aggregated statistics over a time period.\n\nProvides summary metrics for trend analysis, provider comparison,\nand quality monitoring dashboards."
      },
      "QuestionGenerationRunSummary": {
        "properties": {
          "id": {
            "type": "integer",
            "title": "Id",
            "description": "Run ID"
          },
          "started_at": {
            "type": "string",
            "format": "date-time",
            "title": "Started At",
            "description": "When the run started"
          },
          "completed_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Completed At",
            "description": "When the run completed"
          },
          "duration_seconds": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Duration Seconds",
            "description": "Duration in seconds"
          },
          "status": {
            "$ref": "#/components/schemas/GenerationRunStatusSchema",
            "description": "Run status"
          },
          "questions_requested": {
            "type": "integer",
            "title": "Questions Requested",
            "description": "Questions requested"
          },
          "questions_inserted": {
            "type": "integer",
            "title": "Questions Inserted",
            "description": "Questions inserted"
          },
          "overall_success_rate": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Overall Success Rate",
            "description": "Overall success rate"
          },
          "approval_rate": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Approval Rate",
            "description": "Approval rate"
          },
          "avg_arbiter_score": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Avg Arbiter Score",
            "description": "Average arbiter score"
          },
          "total_errors": {
            "type": "integer",
            "title": "Total Errors",
            "description": "Total errors"
          },
          "environment": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Environment",
            "description": "Environment"
          },
          "triggered_by": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Triggered By",
            "description": "Trigger source"
          }
        },
        "type": "object",
        "required": [
          "id",
          "started_at",
          "status",
          "questions_requested",
          "questions_inserted",
          "total_errors"
        ],
        "title": "QuestionGenerationRunSummary",
        "description": "Summary schema for listing generation runs.\n\nReturns essential fields without the full JSONB breakdowns\nto optimize list queries."
      },
      "QuestionResponse": {
        "properties": {
          "id": {
            "type": "integer",
            "title": "Id",
            "description": "Question ID"
          },
          "question_text": {
            "type": "string",
            "title": "Question Text",
            "description": "The question text"
          },
          "question_type": {
            "type": "string",
            "title": "Question Type",
            "description": "Type of question (pattern, logic, etc.)"
          },
          "difficulty_level": {
            "type": "string",
            "title": "Difficulty Level",
            "description": "Difficulty level (easy, medium, hard)"
          },
          "answer_options": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Answer Options",
            "description": "Answer options for multiple choice as list (e.g., ['A', 'B', 'C', 'D'])"
          },
          "explanation": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Explanation",
            "description": "Explanation for the correct answer (if available)"
          }
        },
        "type": "object",
        "required": [
          "id",
          "question_text",
          "question_type",
          "difficulty_level"
        ],
        "title": "QuestionResponse",
        "description": "Schema for individual question response."
      },
      "QuestionTypeTimeStats": {
        "properties": {
          "mean_seconds": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Mean Seconds",
            "description": "Mean response time in seconds"
          }
        },
        "type": "object",
        "title": "QuestionTypeTimeStats",
        "description": "Response time statistics for a specific question type."
      },
      "RecalibratedQuestion": {
        "properties": {
          "question_id": {
            "type": "integer",
            "title": "Question Id",
            "description": "Unique identifier of the question"
          },
          "old_label": {
            "type": "string",
            "title": "Old Label",
            "description": "Previous difficulty label before recalibration"
          },
          "new_label": {
            "type": "string",
            "title": "New Label",
            "description": "New difficulty label after recalibration"
          },
          "empirical_difficulty": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Empirical Difficulty",
            "description": "Empirical p-value (proportion of users answering correctly)"
          },
          "response_count": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Response Count",
            "description": "Number of responses used to calculate empirical difficulty"
          },
          "severity": {
            "$ref": "#/components/schemas/app__schemas__calibration__SeverityLevel",
            "description": "Severity of miscalibration that triggered recalibration"
          }
        },
        "type": "object",
        "required": [
          "question_id",
          "old_label",
          "new_label",
          "empirical_difficulty",
          "response_count",
          "severity"
        ],
        "title": "RecalibratedQuestion",
        "description": "Details of a recalibrated question."
      },
      "RecalibrationRequest": {
        "properties": {
          "dry_run": {
            "type": "boolean",
            "title": "Dry Run",
            "description": "If true, preview changes without applying. If false, commit changes.",
            "default": true
          },
          "min_responses": {
            "type": "integer",
            "maximum": 1000.0,
            "minimum": 1.0,
            "title": "Min Responses",
            "description": "Minimum responses required for reliable recalibration",
            "default": 100
          },
          "question_ids": {
            "anyOf": [
              {
                "items": {
                  "type": "integer"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Question Ids",
            "description": "Specific question IDs to recalibrate. If null, all eligible questions are considered."
          },
          "severity_threshold": {
            "$ref": "#/components/schemas/SeverityLevel-Input",
            "description": "Minimum severity level to trigger recalibration (minor, major, severe)",
            "default": "major"
          }
        },
        "type": "object",
        "title": "RecalibrationRequest",
        "description": "Request schema for POST /v1/admin/questions/recalibrate.\n\nAllows triggering recalibration with configurable options.",
        "example": {
          "dry_run": true,
          "min_responses": 100,
          "severity_threshold": "major"
        }
      },
      "RecalibrationResponse": {
        "properties": {
          "recalibrated": {
            "items": {
              "$ref": "#/components/schemas/RecalibratedQuestion"
            },
            "type": "array",
            "title": "Recalibrated",
            "description": "Questions that were recalibrated (or would be if dry_run=true)"
          },
          "skipped": {
            "items": {
              "$ref": "#/components/schemas/SkippedQuestion"
            },
            "type": "array",
            "title": "Skipped",
            "description": "Questions that were skipped with reasons"
          },
          "total_recalibrated": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Total Recalibrated",
            "description": "Total number of questions recalibrated"
          },
          "dry_run": {
            "type": "boolean",
            "title": "Dry Run",
            "description": "Whether this was a dry run (preview only)"
          }
        },
        "type": "object",
        "required": [
          "recalibrated",
          "skipped",
          "total_recalibrated",
          "dry_run"
        ],
        "title": "RecalibrationResponse",
        "description": "Response schema for POST /v1/admin/questions/recalibrate.\n\nReturns details of recalibrated and skipped questions.",
        "example": {
          "dry_run": true,
          "recalibrated": [
            {
              "empirical_difficulty": 0.82,
              "new_label": "easy",
              "old_label": "hard",
              "question_id": 123,
              "response_count": 156,
              "severity": "severe"
            }
          ],
          "skipped": [
            {
              "assigned_difficulty": "medium",
              "question_id": 456,
              "reason": "below_threshold",
              "severity": "minor"
            }
          ],
          "total_recalibrated": 5
        }
      },
      "RecommendationCategory": {
        "type": "string",
        "enum": [
          "data_collection",
          "item_review",
          "threshold_warning"
        ],
        "title": "RecommendationCategory",
        "description": "Category of reliability recommendation."
      },
      "RecommendationPriority": {
        "type": "string",
        "enum": [
          "high",
          "medium",
          "low"
        ],
        "title": "RecommendationPriority",
        "description": "Priority level for recommendations."
      },
      "ReliabilityHistoryItem": {
        "properties": {
          "id": {
            "type": "integer",
            "title": "Id",
            "description": "Unique identifier of the reliability metric record"
          },
          "metric_type": {
            "$ref": "#/components/schemas/MetricType",
            "description": "Type of reliability metric: cronbachs_alpha, test_retest, split_half"
          },
          "value": {
            "type": "number",
            "title": "Value",
            "description": "The calculated reliability coefficient value"
          },
          "sample_size": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Sample Size",
            "description": "Number of sessions or pairs used in the calculation"
          },
          "calculated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Calculated At",
            "description": "Timestamp when this metric was calculated"
          },
          "details": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Details",
            "description": "Additional context such as interpretation, thresholds, etc."
          }
        },
        "type": "object",
        "required": [
          "id",
          "metric_type",
          "value",
          "sample_size",
          "calculated_at"
        ],
        "title": "ReliabilityHistoryItem",
        "description": "A single historical reliability metric record.\n\nUsed for trend analysis of reliability metrics over time."
      },
      "ReliabilityHistoryResponse": {
        "properties": {
          "metrics": {
            "items": {
              "$ref": "#/components/schemas/ReliabilityHistoryItem"
            },
            "type": "array",
            "title": "Metrics",
            "description": "Historical reliability metrics ordered by calculated_at DESC"
          },
          "total_count": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Total Count",
            "description": "Total number of metrics matching the query"
          }
        },
        "type": "object",
        "required": [
          "total_count"
        ],
        "title": "ReliabilityHistoryResponse",
        "description": "Response schema for GET /v1/admin/reliability/history.\n\nReturns historical reliability metrics for trend analysis.",
        "example": {
          "metrics": [
            {
              "calculated_at": "2025-12-06T10:30:00Z",
              "details": {
                "interpretation": "good",
                "meets_threshold": true,
                "num_items": 20
              },
              "id": 15,
              "metric_type": "cronbachs_alpha",
              "sample_size": 523,
              "value": 0.78
            },
            {
              "calculated_at": "2025-11-29T10:30:00Z",
              "details": {
                "interpretation": "good",
                "meets_threshold": true,
                "num_items": 20
              },
              "id": 14,
              "metric_type": "cronbachs_alpha",
              "sample_size": 450,
              "value": 0.76
            }
          ],
          "total_count": 15
        }
      },
      "ReliabilityInterpretation": {
        "type": "string",
        "enum": [
          "excellent",
          "good",
          "acceptable",
          "questionable",
          "poor",
          "unacceptable"
        ],
        "title": "ReliabilityInterpretation",
        "description": "Interpretation of reliability coefficient values.\n\nThe interpretation hierarchy reflects standard psychometric thresholds:\n- excellent: >= 0.90 (professional-grade reliability)\n- good: >= 0.80 (acceptable for most purposes)\n- acceptable: >= 0.70 (minimum for research applications)\n- questionable: >= 0.60 (borderline, warrants attention)\n- poor: >= 0.50 (below acceptable for most purposes)\n- unacceptable: < 0.50 (not reliable enough for meaningful interpretation)\n\nNote: Thresholds may differ slightly between metric types (Cronbach's alpha,\ntest-retest, split-half) but the interpretation meanings are consistent."
      },
      "ReliabilityMetrics": {
        "properties": {
          "cronbachs_alpha": {
            "type": "number",
            "title": "Cronbachs Alpha",
            "description": "Cronbach's alpha reliability coefficient (-1 to 1). Negative values indicate poor item correlation. Values >= 0.7 are acceptable."
          }
        },
        "type": "object",
        "required": [
          "cronbachs_alpha"
        ],
        "title": "ReliabilityMetrics",
        "description": "Reliability metrics for the factor analysis."
      },
      "ReliabilityRecommendation": {
        "properties": {
          "category": {
            "$ref": "#/components/schemas/RecommendationCategory",
            "description": "Recommendation category: data_collection, item_review, threshold_warning"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Human-readable recommendation message"
          },
          "priority": {
            "$ref": "#/components/schemas/RecommendationPriority",
            "description": "Priority level: high, medium, low"
          }
        },
        "type": "object",
        "required": [
          "category",
          "message",
          "priority"
        ],
        "title": "ReliabilityRecommendation",
        "description": "Actionable recommendation for improving reliability metrics.\n\nRecommendations are generated based on current metric values and\ndata collection status."
      },
      "ReliabilityReportResponse": {
        "properties": {
          "internal_consistency": {
            "$ref": "#/components/schemas/InternalConsistencyMetrics",
            "description": "Cronbach's alpha and related internal consistency metrics"
          },
          "test_retest": {
            "$ref": "#/components/schemas/TestRetestMetrics",
            "description": "Test-retest reliability metrics"
          },
          "split_half": {
            "$ref": "#/components/schemas/SplitHalfMetrics",
            "description": "Split-half reliability metrics with Spearman-Brown correction"
          },
          "overall_status": {
            "$ref": "#/components/schemas/OverallStatus",
            "description": "Overall reliability status: excellent, acceptable, needs_attention, insufficient_data"
          },
          "recommendations": {
            "items": {
              "$ref": "#/components/schemas/ReliabilityRecommendation"
            },
            "type": "array",
            "title": "Recommendations",
            "description": "Actionable recommendations for improving reliability"
          }
        },
        "type": "object",
        "required": [
          "internal_consistency",
          "test_retest",
          "split_half",
          "overall_status"
        ],
        "title": "ReliabilityReportResponse",
        "description": "Response schema for GET /v1/admin/reliability.\n\nProvides comprehensive reliability metrics report including internal\nconsistency (Cronbach's alpha), test-retest reliability, and split-half\nreliability with interpretations and recommendations.",
        "example": {
          "internal_consistency": {
            "cronbachs_alpha": 0.78,
            "interpretation": "good",
            "item_total_correlations": {
              "1": 0.45,
              "2": 0.52,
              "3": 0.38
            },
            "last_calculated": "2025-12-06T10:30:00Z",
            "meets_threshold": true,
            "num_items": 20,
            "num_sessions": 523
          },
          "overall_status": "acceptable",
          "recommendations": [
            {
              "category": "data_collection",
              "message": "Test-retest sample size is low (89 pairs). Target: 100+",
              "priority": "medium"
            },
            {
              "category": "item_review",
              "message": "Consider removing 3 items with negative item-total correlations",
              "priority": "high"
            }
          ],
          "split_half": {
            "last_calculated": "2025-12-06T10:30:00Z",
            "meets_threshold": true,
            "num_sessions": 523,
            "raw_correlation": 0.71,
            "spearman_brown": 0.83
          },
          "test_retest": {
            "correlation": 0.65,
            "interpretation": "acceptable",
            "last_calculated": "2025-12-06T10:30:00Z",
            "mean_interval_days": 45.3,
            "meets_threshold": true,
            "num_pairs": 89,
            "practice_effect": 2.1
          }
        }
      },
      "ResponseItem": {
        "properties": {
          "question_id": {
            "type": "integer",
            "title": "Question Id",
            "description": "Question ID being answered"
          },
          "user_answer": {
            "type": "string",
            "title": "User Answer",
            "description": "User's answer to the question"
          },
          "time_spent_seconds": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Time Spent Seconds",
            "description": "Time spent on this question in seconds"
          }
        },
        "type": "object",
        "required": [
          "question_id",
          "user_answer"
        ],
        "title": "ResponseItem",
        "description": "Schema for individual response item."
      },
      "ResponseSubmission": {
        "properties": {
          "session_id": {
            "type": "integer",
            "title": "Session Id",
            "description": "Test session ID"
          },
          "responses": {
            "items": {
              "$ref": "#/components/schemas/ResponseItem"
            },
            "type": "array",
            "title": "Responses",
            "description": "List of responses for the test session"
          },
          "time_limit_exceeded": {
            "type": "boolean",
            "title": "Time Limit Exceeded",
            "description": "Flag indicating if the time limit was exceeded (client-reported)",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "session_id",
          "responses"
        ],
        "title": "ResponseSubmission",
        "description": "Schema for submitting test responses."
      },
      "ResponseTimeAnalyticsResponse": {
        "properties": {
          "overall": {
            "$ref": "#/components/schemas/OverallTimeStats",
            "description": "Overall response time statistics"
          },
          "by_difficulty": {
            "$ref": "#/components/schemas/ByDifficultyStats",
            "description": "Response time statistics by difficulty level"
          },
          "by_question_type": {
            "$ref": "#/components/schemas/ByQuestionTypeStats",
            "description": "Response time statistics by question type"
          },
          "anomaly_summary": {
            "$ref": "#/components/schemas/AnomalySummary",
            "description": "Summary of response time anomalies"
          },
          "total_sessions_analyzed": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Total Sessions Analyzed",
            "description": "Total number of completed sessions included in analysis"
          },
          "total_responses_analyzed": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Total Responses Analyzed",
            "description": "Total number of responses with time data included in analysis"
          }
        },
        "type": "object",
        "required": [
          "overall",
          "by_difficulty",
          "by_question_type",
          "anomaly_summary",
          "total_sessions_analyzed",
          "total_responses_analyzed"
        ],
        "title": "ResponseTimeAnalyticsResponse",
        "description": "Response schema for GET /v1/admin/analytics/response-times.\n\nProvides aggregate response time analytics across all completed test sessions.",
        "example": {
          "anomaly_summary": {
            "pct_flagged": 3.2,
            "sessions_with_extended_times": 8,
            "sessions_with_rapid_responses": 23
          },
          "by_difficulty": {
            "easy": {
              "mean_seconds": 25,
              "median_seconds": 22
            },
            "hard": {
              "mean_seconds": 52,
              "median_seconds": 48
            },
            "medium": {
              "mean_seconds": 38,
              "median_seconds": 35
            }
          },
          "by_question_type": {
            "logic": {
              "mean_seconds": 45
            },
            "math": {
              "mean_seconds": 38
            },
            "memory": {
              "mean_seconds": 30
            },
            "pattern": {
              "mean_seconds": 42
            },
            "spatial": {
              "mean_seconds": 55
            },
            "verbal": {
              "mean_seconds": 28
            }
          },
          "overall": {
            "mean_per_question_seconds": 36,
            "mean_test_duration_seconds": 720,
            "median_test_duration_seconds": 680
          },
          "total_responses_analyzed": 30000,
          "total_sessions_analyzed": 1500
        }
      },
      "SessionNeedingReview": {
        "properties": {
          "session_id": {
            "type": "integer",
            "title": "Session Id",
            "description": "Test session ID"
          },
          "user_id": {
            "type": "integer",
            "title": "User Id",
            "description": "User ID who took the test"
          },
          "validity_status": {
            "$ref": "#/components/schemas/ValidityStatus",
            "description": "Session validity status"
          },
          "severity_score": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Severity Score",
            "description": "Severity score"
          },
          "flags": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Flags",
            "description": "List of flag types detected"
          },
          "completed_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Completed At",
            "description": "When the test was completed"
          }
        },
        "type": "object",
        "required": [
          "session_id",
          "user_id",
          "validity_status",
          "severity_score",
          "flags"
        ],
        "title": "SessionNeedingReview",
        "description": "Summary of a session that needs admin review."
      },
      "SessionValidityResponse": {
        "properties": {
          "session_id": {
            "type": "integer",
            "title": "Session Id",
            "description": "Test session ID"
          },
          "user_id": {
            "type": "integer",
            "title": "User Id",
            "description": "User ID who took the test"
          },
          "validity_status": {
            "$ref": "#/components/schemas/ValidityStatus",
            "description": "Overall validity status: valid, suspect, or invalid"
          },
          "severity_score": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Severity Score",
            "description": "Combined severity score (higher = more concerning)"
          },
          "confidence": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Confidence",
            "description": "Confidence in validity assessment (1.0 = fully confident, 0.0 = no confidence)"
          },
          "flags": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Flags",
            "description": "List of flag type identifiers detected"
          },
          "flag_details": {
            "items": {
              "$ref": "#/components/schemas/ValidityFlag"
            },
            "type": "array",
            "title": "Flag Details",
            "description": "Detailed information for each flag"
          },
          "details": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/ValidityDetails"
              },
              {
                "type": "null"
              }
            ],
            "description": "Full breakdown of each validity check (if available)"
          },
          "completed_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Completed At",
            "description": "When the test session was completed"
          },
          "validity_checked_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Validity Checked At",
            "description": "When validity analysis was performed"
          }
        },
        "type": "object",
        "required": [
          "session_id",
          "user_id",
          "validity_status",
          "severity_score",
          "confidence",
          "flags",
          "flag_details"
        ],
        "title": "SessionValidityResponse",
        "description": "Full validity assessment for a single test session.\n\nResponse schema for GET /v1/admin/sessions/{id}/validity endpoint.",
        "example": {
          "completed_at": "2025-12-10T15:30:00Z",
          "confidence": 0.55,
          "details": {
            "guttman_check": {
              "correct_count": 12,
              "details": "Elevated Guttman error rate detected.",
              "error_count": 15,
              "error_rate": 0.25,
              "incorrect_count": 13,
              "interpretation": "elevated_errors",
              "max_possible_errors": 60,
              "total_responses": 25
            },
            "person_fit": {
              "details": "Response pattern is consistent with expected performance.",
              "fit_flag": "normal",
              "fit_ratio": 0.12,
              "score_percentile": "medium",
              "total_responses": 25,
              "unexpected_correct": 1,
              "unexpected_incorrect": 2
            },
            "time_check": {
              "details": "High severity concern(s) detected.",
              "extended_pause_count": 0,
              "fast_hard_correct_count": 1,
              "rapid_response_count": 4,
              "statistics": {
                "max_time": 120.5,
                "mean_time": 34.0,
                "min_time": 2.1,
                "total_responses": 25
              },
              "total_time_seconds": 850.5,
              "validity_concern": true
            }
          },
          "flag_details": [
            {
              "count": 4,
              "details": "4 responses completed in under 3 seconds each.",
              "severity": "high",
              "source": "time_check",
              "type": "multiple_rapid_responses"
            },
            {
              "details": "Elevated Guttman error rate: 0.25",
              "error_rate": 0.25,
              "severity": "medium",
              "source": "guttman_check",
              "type": "elevated_guttman_errors"
            }
          ],
          "flags": [
            "multiple_rapid_responses",
            "elevated_guttman_errors"
          ],
          "session_id": 123,
          "severity_score": 3,
          "user_id": 456,
          "validity_checked_at": "2025-12-10T15:30:05Z",
          "validity_status": "suspect"
        }
      },
      "SeverityBreakdown": {
        "properties": {
          "minor": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Minor",
            "description": "Questions within 0.10 of expected range boundary"
          },
          "major": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Major",
            "description": "Questions 0.10-0.25 outside expected range"
          },
          "severe": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Severe",
            "description": "Questions >0.25 outside expected range"
          }
        },
        "type": "object",
        "required": [
          "minor",
          "major",
          "severe"
        ],
        "title": "SeverityBreakdown",
        "description": "Breakdown of miscalibrated questions by severity level."
      },
      "SeverityLevel-Input": {
        "type": "string",
        "enum": [
          "minor",
          "major",
          "severe"
        ],
        "title": "SeverityLevel",
        "description": "Severity level for miscalibration."
      },
      "SkippedQuestion": {
        "properties": {
          "question_id": {
            "type": "integer",
            "title": "Question Id",
            "description": "Unique identifier of the question"
          },
          "reason": {
            "type": "string",
            "title": "Reason",
            "description": "Reason for skipping: 'below_threshold', 'not_in_question_ids', 'insufficient_data', 'correctly_calibrated', 'database_error'"
          },
          "assigned_difficulty": {
            "type": "string",
            "title": "Assigned Difficulty",
            "description": "Current difficulty label"
          },
          "severity": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/app__schemas__calibration__SeverityLevel"
              },
              {
                "type": "null"
              }
            ],
            "description": "Severity of miscalibration (null for correctly calibrated or insufficient data)"
          }
        },
        "type": "object",
        "required": [
          "question_id",
          "reason",
          "assigned_difficulty"
        ],
        "title": "SkippedQuestion",
        "description": "Details of a question that was skipped during recalibration."
      },
      "SplitHalfMetrics": {
        "properties": {
          "raw_correlation": {
            "anyOf": [
              {
                "type": "number",
                "maximum": 1.0,
                "minimum": -1.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Raw Correlation",
            "description": "Raw correlation between odd and even halves. None if insufficient data."
          },
          "spearman_brown": {
            "anyOf": [
              {
                "type": "number",
                "maximum": 1.0,
                "minimum": -1.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Spearman Brown",
            "description": "Spearman-Brown corrected reliability for full test length"
          },
          "meets_threshold": {
            "type": "boolean",
            "title": "Meets Threshold",
            "description": "Whether Spearman-Brown corrected reliability meets threshold (>= 0.70)"
          },
          "num_sessions": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Num Sessions",
            "description": "Number of test sessions used in the calculation"
          },
          "last_calculated": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Calculated",
            "description": "Timestamp when this metric was last calculated"
          }
        },
        "type": "object",
        "required": [
          "meets_threshold",
          "num_sessions"
        ],
        "title": "SplitHalfMetrics",
        "description": "Metrics for split-half reliability.\n\nSplit-half reliability splits each test into odd/even halves, correlates\nthe scores, and applies Spearman-Brown correction for full-test estimate."
      },
      "StartTestResponse": {
        "properties": {
          "session": {
            "$ref": "#/components/schemas/TestSessionResponse",
            "description": "Created test session"
          },
          "questions": {
            "items": {
              "$ref": "#/components/schemas/QuestionResponse"
            },
            "type": "array",
            "title": "Questions",
            "description": "Questions for this test"
          },
          "total_questions": {
            "type": "integer",
            "title": "Total Questions",
            "description": "Total number of questions in test"
          }
        },
        "type": "object",
        "required": [
          "session",
          "questions",
          "total_questions"
        ],
        "title": "StartTestResponse",
        "description": "Schema for starting a new test session."
      },
      "SubmitTestResponse": {
        "properties": {
          "session": {
            "$ref": "#/components/schemas/TestSessionResponse",
            "description": "Updated test session"
          },
          "result": {
            "$ref": "#/components/schemas/TestResultResponse",
            "description": "Test result with IQ score"
          },
          "responses_count": {
            "type": "integer",
            "title": "Responses Count",
            "description": "Number of responses submitted"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Confirmation message"
          }
        },
        "type": "object",
        "required": [
          "session",
          "result",
          "responses_count",
          "message"
        ],
        "title": "SubmitTestResponse",
        "description": "Schema for response submission result."
      },
      "TestResultResponse": {
        "properties": {
          "id": {
            "type": "integer",
            "title": "Id",
            "description": "Test result ID"
          },
          "test_session_id": {
            "type": "integer",
            "title": "Test Session Id",
            "description": "Associated test session ID"
          },
          "user_id": {
            "type": "integer",
            "title": "User Id",
            "description": "User ID"
          },
          "iq_score": {
            "type": "integer",
            "title": "Iq Score",
            "description": "Calculated IQ score"
          },
          "percentile_rank": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Percentile Rank",
            "description": "Percentile rank (0-100, what % of population scores below)"
          },
          "total_questions": {
            "type": "integer",
            "title": "Total Questions",
            "description": "Total questions in test"
          },
          "correct_answers": {
            "type": "integer",
            "title": "Correct Answers",
            "description": "Number of correct answers"
          },
          "accuracy_percentage": {
            "type": "number",
            "title": "Accuracy Percentage",
            "description": "Accuracy percentage (0-100)"
          },
          "completion_time_seconds": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Completion Time Seconds",
            "description": "Time taken to complete test in seconds"
          },
          "completed_at": {
            "type": "string",
            "format": "date-time",
            "title": "Completed At",
            "description": "Timestamp of completion"
          },
          "response_time_flags": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Response Time Flags",
            "description": "Summary of response time anomalies (rapid responses, extended times, validity concerns)"
          },
          "domain_scores": {
            "anyOf": [
              {
                "additionalProperties": {
                  "type": "object"
                },
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Domain Scores",
            "description": "Per-domain performance breakdown with correct, total, pct, and percentile for each cognitive domain"
          },
          "strongest_domain": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Strongest Domain",
            "description": "Name of the highest-scoring cognitive domain"
          },
          "weakest_domain": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Weakest Domain",
            "description": "Name of the lowest-scoring cognitive domain"
          },
          "confidence_interval": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/ConfidenceIntervalSchema"
              },
              {
                "type": "null"
              }
            ],
            "description": "Confidence interval for the IQ score. Null when reliability data is insufficient (< 0.60)."
          }
        },
        "type": "object",
        "required": [
          "id",
          "test_session_id",
          "user_id",
          "iq_score",
          "total_questions",
          "correct_answers",
          "accuracy_percentage",
          "completed_at"
        ],
        "title": "TestResultResponse",
        "description": "Schema for test result data."
      },
      "TestRetestMetrics": {
        "properties": {
          "correlation": {
            "anyOf": [
              {
                "type": "number",
                "maximum": 1.0,
                "minimum": -1.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Correlation",
            "description": "Pearson correlation coefficient between test and retest scores. None if insufficient data."
          },
          "interpretation": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/ReliabilityInterpretation"
              },
              {
                "type": "null"
              }
            ],
            "description": "Interpretation of correlation: excellent (>=0.90), good (>=0.80), acceptable (>=0.70), questionable (>=0.60), poor (>=0.50), unacceptable (<0.50)"
          },
          "meets_threshold": {
            "type": "boolean",
            "title": "Meets Threshold",
            "description": "Whether correlation meets the minimum acceptable threshold (> 0.50)"
          },
          "num_pairs": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Num Pairs",
            "description": "Number of test-retest pairs used in the calculation"
          },
          "mean_interval_days": {
            "anyOf": [
              {
                "type": "number",
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Mean Interval Days",
            "description": "Mean number of days between test and retest"
          },
          "practice_effect": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Practice Effect",
            "description": "Mean score gain on retest (positive indicates improvement)"
          },
          "last_calculated": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Calculated",
            "description": "Timestamp when this metric was last calculated"
          }
        },
        "type": "object",
        "required": [
          "meets_threshold",
          "num_pairs"
        ],
        "title": "TestRetestMetrics",
        "description": "Metrics for test-retest reliability.\n\nTest-retest reliability measures consistency of scores across repeated\nadministrations. Uses Pearson correlation between consecutive test scores."
      },
      "TestSessionAbandonResponse": {
        "properties": {
          "session": {
            "$ref": "#/components/schemas/TestSessionResponse",
            "description": "Abandoned test session"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Success message"
          },
          "responses_saved": {
            "type": "integer",
            "title": "Responses Saved",
            "description": "Number of responses saved before abandonment"
          }
        },
        "type": "object",
        "required": [
          "session",
          "message",
          "responses_saved"
        ],
        "title": "TestSessionAbandonResponse",
        "description": "Schema for abandoning a test session."
      },
      "TestSessionResponse": {
        "properties": {
          "id": {
            "type": "integer",
            "title": "Id",
            "description": "Test session ID"
          },
          "user_id": {
            "type": "integer",
            "title": "User Id",
            "description": "User ID"
          },
          "status": {
            "type": "string",
            "title": "Status",
            "description": "Session status (in_progress, completed, abandoned)"
          },
          "started_at": {
            "type": "string",
            "format": "date-time",
            "title": "Started At",
            "description": "Session start timestamp"
          },
          "completed_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Completed At",
            "description": "Session completion timestamp"
          },
          "time_limit_exceeded": {
            "type": "boolean",
            "title": "Time Limit Exceeded",
            "description": "Flag indicating if 30-minute time limit was exceeded",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "id",
          "user_id",
          "status",
          "started_at"
        ],
        "title": "TestSessionResponse",
        "description": "Schema for test session response."
      },
      "TestSessionStatusResponse": {
        "properties": {
          "session": {
            "$ref": "#/components/schemas/TestSessionResponse",
            "description": "Test session details"
          },
          "questions_count": {
            "type": "integer",
            "title": "Questions Count",
            "description": "Number of questions in this session"
          },
          "questions": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/QuestionResponse"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Questions",
            "description": "Questions for this session (if session is in_progress)"
          }
        },
        "type": "object",
        "required": [
          "session",
          "questions_count"
        ],
        "title": "TestSessionStatusResponse",
        "description": "Schema for checking test session status."
      },
      "TimeCheckDetails": {
        "properties": {
          "validity_concern": {
            "type": "boolean",
            "title": "Validity Concern",
            "description": "True if any high-severity time flags detected"
          },
          "total_time_seconds": {
            "type": "number",
            "minimum": 0.0,
            "title": "Total Time Seconds",
            "description": "Total test completion time in seconds"
          },
          "rapid_response_count": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Rapid Response Count",
            "description": "Number of responses under 3 seconds"
          },
          "extended_pause_count": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Extended Pause Count",
            "description": "Number of responses over 5 minutes"
          },
          "fast_hard_correct_count": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Fast Hard Correct Count",
            "description": "Hard questions answered correctly under 10 seconds"
          },
          "statistics": {
            "$ref": "#/components/schemas/TimeCheckStatistics",
            "description": "Response time statistics"
          },
          "details": {
            "type": "string",
            "title": "Details",
            "description": "Human-readable explanation"
          }
        },
        "type": "object",
        "required": [
          "validity_concern",
          "total_time_seconds",
          "rapid_response_count",
          "extended_pause_count",
          "fast_hard_correct_count",
          "statistics",
          "details"
        ],
        "title": "TimeCheckDetails",
        "description": "Detailed results from response time plausibility check."
      },
      "TimeCheckStatistics": {
        "properties": {
          "mean_time": {
            "type": "number",
            "minimum": 0.0,
            "title": "Mean Time",
            "description": "Average response time in seconds"
          },
          "min_time": {
            "type": "number",
            "minimum": 0.0,
            "title": "Min Time",
            "description": "Fastest response time in seconds"
          },
          "max_time": {
            "type": "number",
            "minimum": 0.0,
            "title": "Max Time",
            "description": "Slowest response time in seconds"
          },
          "total_responses": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Total Responses",
            "description": "Number of responses with valid time data"
          }
        },
        "type": "object",
        "required": [
          "mean_time",
          "min_time",
          "max_time",
          "total_responses"
        ],
        "title": "TimeCheckStatistics",
        "description": "Response time statistics from time plausibility check."
      },
      "Token": {
        "properties": {
          "access_token": {
            "type": "string",
            "title": "Access Token",
            "description": "JWT access token"
          },
          "refresh_token": {
            "type": "string",
            "title": "Refresh Token",
            "description": "JWT refresh token"
          },
          "token_type": {
            "type": "string",
            "title": "Token Type",
            "description": "Token type",
            "default": "bearer"
          },
          "user": {
            "$ref": "#/components/schemas/UserResponse",
            "description": "User information"
          }
        },
        "type": "object",
        "required": [
          "access_token",
          "refresh_token",
          "user"
        ],
        "title": "Token",
        "description": "Schema for token response (login only)."
      },
      "TokenRefresh": {
        "properties": {
          "access_token": {
            "type": "string",
            "title": "Access Token",
            "description": "New JWT access token"
          },
          "refresh_token": {
            "type": "string",
            "title": "Refresh Token",
            "description": "New JWT refresh token"
          },
          "token_type": {
            "type": "string",
            "title": "Token Type",
            "description": "Token type",
            "default": "bearer"
          },
          "user": {
            "$ref": "#/components/schemas/UserResponse",
            "description": "User information"
          }
        },
        "type": "object",
        "required": [
          "access_token",
          "refresh_token",
          "user"
        ],
        "title": "TokenRefresh",
        "description": "Schema for token refresh response."
      },
      "TriggerQuestionGenerationRequest": {
        "properties": {
          "count": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Count",
            "default": 50
          },
          "dry_run": {
            "type": "boolean",
            "title": "Dry Run",
            "default": false
          }
        },
        "type": "object",
        "title": "TriggerQuestionGenerationRequest",
        "description": "Request model for triggering question generation."
      },
      "TriggerQuestionGenerationResponse": {
        "properties": {
          "message": {
            "type": "string",
            "title": "Message"
          },
          "job_id": {
            "type": "string",
            "title": "Job Id"
          },
          "pid": {
            "type": "integer",
            "title": "Pid"
          },
          "status": {
            "type": "string",
            "title": "Status"
          }
        },
        "type": "object",
        "required": [
          "message",
          "job_id",
          "pid",
          "status"
        ],
        "title": "TriggerQuestionGenerationResponse",
        "description": "Response model for question generation trigger."
      },
      "TypeDiscrimination": {
        "properties": {
          "mean_discrimination": {
            "type": "number",
            "title": "Mean Discrimination",
            "description": "Mean discrimination value for this question type"
          },
          "negative_count": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Negative Count",
            "description": "Number of questions with negative discrimination of this type"
          }
        },
        "type": "object",
        "required": [
          "mean_discrimination",
          "negative_count"
        ],
        "title": "TypeDiscrimination",
        "description": "Discrimination statistics for a question type."
      },
      "UnseenQuestionsResponse": {
        "properties": {
          "questions": {
            "items": {
              "$ref": "#/components/schemas/QuestionResponse"
            },
            "type": "array",
            "title": "Questions",
            "description": "List of unseen questions"
          },
          "total_count": {
            "type": "integer",
            "title": "Total Count",
            "description": "Total number of questions returned"
          },
          "requested_count": {
            "type": "integer",
            "title": "Requested Count",
            "description": "Number of questions requested"
          }
        },
        "type": "object",
        "required": [
          "questions",
          "total_count",
          "requested_count"
        ],
        "title": "UnseenQuestionsResponse",
        "description": "Schema for response containing unseen questions."
      },
      "UserLogin": {
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "title": "Email",
            "description": "User email address"
          },
          "password": {
            "type": "string",
            "title": "Password",
            "description": "User password"
          }
        },
        "type": "object",
        "required": [
          "email",
          "password"
        ],
        "title": "UserLogin",
        "description": "Schema for user login request."
      },
      "UserProfileUpdate": {
        "properties": {
          "first_name": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100,
                "minLength": 1
              },
              {
                "type": "null"
              }
            ],
            "title": "First Name",
            "description": "User first name"
          },
          "last_name": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100,
                "minLength": 1
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Name",
            "description": "User last name"
          },
          "notification_enabled": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Notification Enabled",
            "description": "Push notification preference"
          }
        },
        "type": "object",
        "title": "UserProfileUpdate",
        "description": "Schema for updating user profile."
      },
      "UserRegister": {
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "title": "Email",
            "description": "User email address"
          },
          "password": {
            "type": "string",
            "maxLength": 128,
            "minLength": 8,
            "title": "Password",
            "description": "User password (8-128 characters)"
          },
          "first_name": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "First Name",
            "description": "User first name"
          },
          "last_name": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Last Name",
            "description": "User last name"
          },
          "birth_year": {
            "anyOf": [
              {
                "type": "integer",
                "minimum": 1900.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Birth Year",
            "description": "Year of birth (optional, for norming study)"
          },
          "education_level": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/EducationLevelSchema"
              },
              {
                "type": "null"
              }
            ],
            "description": "Highest education level attained (optional)"
          },
          "country": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100,
                "minLength": 1
              },
              {
                "type": "null"
              }
            ],
            "title": "Country",
            "description": "Country of residence (optional)"
          },
          "region": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100,
                "minLength": 1
              },
              {
                "type": "null"
              }
            ],
            "title": "Region",
            "description": "State/Province/Region (optional)"
          }
        },
        "type": "object",
        "required": [
          "email",
          "password",
          "first_name",
          "last_name"
        ],
        "title": "UserRegister",
        "description": "Schema for user registration request."
      },
      "UserResponse": {
        "properties": {
          "id": {
            "type": "integer",
            "title": "Id",
            "description": "User ID"
          },
          "email": {
            "type": "string",
            "title": "Email",
            "description": "User email address"
          },
          "first_name": {
            "type": "string",
            "title": "First Name",
            "description": "User first name"
          },
          "last_name": {
            "type": "string",
            "title": "Last Name",
            "description": "User last name"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "Account creation timestamp"
          },
          "last_login_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Login At",
            "description": "Last login timestamp"
          },
          "notification_enabled": {
            "type": "boolean",
            "title": "Notification Enabled",
            "description": "Push notification preference"
          },
          "birth_year": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Birth Year",
            "description": "Year of birth"
          },
          "education_level": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/EducationLevelSchema"
              },
              {
                "type": "null"
              }
            ],
            "description": "Highest education level attained"
          },
          "country": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Country",
            "description": "Country of residence"
          },
          "region": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Region",
            "description": "State/Province/Region"
          }
        },
        "type": "object",
        "required": [
          "id",
          "email",
          "first_name",
          "last_name",
          "created_at",
          "notification_enabled"
        ],
        "title": "UserResponse",
        "description": "Schema for user response."
      },
      "ValidationError": {
        "properties": {
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "type": "array",
            "title": "Location"
          },
          "msg": {
            "type": "string",
            "title": "Message"
          },
          "type": {
            "type": "string",
            "title": "Error Type"
          }
        },
        "type": "object",
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "title": "ValidationError"
      },
      "ValidityDetails": {
        "properties": {
          "person_fit": {
            "$ref": "#/components/schemas/PersonFitDetails",
            "description": "Person-fit heuristic analysis results"
          },
          "time_check": {
            "$ref": "#/components/schemas/TimeCheckDetails",
            "description": "Response time plausibility check results"
          },
          "guttman_check": {
            "$ref": "#/components/schemas/GuttmanCheckDetails",
            "description": "Guttman error detection results"
          }
        },
        "type": "object",
        "required": [
          "person_fit",
          "time_check",
          "guttman_check"
        ],
        "title": "ValidityDetails",
        "description": "Detailed breakdown of all validity check components.\n\nProvides full analysis results from each validity check for\ncomprehensive review of a session's validity assessment."
      },
      "ValidityFlag": {
        "properties": {
          "type": {
            "type": "string",
            "title": "Type",
            "description": "Flag type identifier (e.g., 'multiple_rapid_responses', 'aberrant_response_pattern')"
          },
          "severity": {
            "$ref": "#/components/schemas/app__schemas__validity__SeverityLevel",
            "description": "Severity level of this flag"
          },
          "source": {
            "$ref": "#/components/schemas/FlagSource",
            "description": "Which validity check generated this flag"
          },
          "details": {
            "type": "string",
            "title": "Details",
            "description": "Human-readable explanation of the flag"
          },
          "count": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Count",
            "description": "Number of occurrences (for countable flags like rapid responses)"
          },
          "error_rate": {
            "anyOf": [
              {
                "type": "number",
                "maximum": 1.0,
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Error Rate",
            "description": "Error rate (for Guttman flags)"
          }
        },
        "type": "object",
        "required": [
          "type",
          "severity",
          "source",
          "details"
        ],
        "title": "ValidityFlag",
        "description": "Individual validity flag with type, severity, and details.\n\nRepresents a single detected concern from the validity analysis system.",
        "example": {
          "count": 5,
          "details": "5 responses completed in under 3 seconds each, suggesting random clicking or pre-known answers.",
          "severity": "high",
          "source": "time_check",
          "type": "multiple_rapid_responses"
        }
      },
      "ValidityOverrideRequest": {
        "properties": {
          "validity_status": {
            "$ref": "#/components/schemas/ValidityStatus",
            "description": "New validity status to set"
          },
          "override_reason": {
            "type": "string",
            "maxLength": 1000,
            "minLength": 10,
            "title": "Override Reason",
            "description": "Required explanation for the override (min 10 characters)"
          }
        },
        "type": "object",
        "required": [
          "validity_status",
          "override_reason"
        ],
        "title": "ValidityOverrideRequest",
        "description": "Request schema for admin to override validity status.\n\nUsed with PATCH /v1/admin/sessions/{id}/validity endpoint.",
        "example": {
          "override_reason": "Manual review confirmed legitimate pattern. User has consistent test history and rapid responses were on very easy questions.",
          "validity_status": "valid"
        }
      },
      "ValidityOverrideResponse": {
        "properties": {
          "session_id": {
            "type": "integer",
            "title": "Session Id",
            "description": "Test session ID"
          },
          "previous_status": {
            "$ref": "#/components/schemas/ValidityStatus",
            "description": "Validity status before override"
          },
          "new_status": {
            "$ref": "#/components/schemas/ValidityStatus",
            "description": "New validity status after override"
          },
          "override_reason": {
            "type": "string",
            "title": "Override Reason",
            "description": "Reason provided for the override"
          },
          "overridden_by": {
            "type": "integer",
            "title": "Overridden By",
            "description": "Admin user ID who performed the override"
          },
          "overridden_at": {
            "type": "string",
            "format": "date-time",
            "title": "Overridden At",
            "description": "Timestamp of the override"
          }
        },
        "type": "object",
        "required": [
          "session_id",
          "previous_status",
          "new_status",
          "override_reason",
          "overridden_by",
          "overridden_at"
        ],
        "title": "ValidityOverrideResponse",
        "description": "Response schema after admin overrides validity status.\n\nConfirms the override was applied and returns updated session validity.",
        "example": {
          "new_status": "valid",
          "overridden_at": "2025-12-12T10:30:00Z",
          "overridden_by": 1,
          "override_reason": "Manual review confirmed legitimate pattern.",
          "previous_status": "suspect",
          "session_id": 123
        }
      },
      "ValidityStatus": {
        "type": "string",
        "enum": [
          "valid",
          "suspect",
          "invalid"
        ],
        "title": "ValidityStatus",
        "description": "Overall validity status for a test session."
      },
      "ValidityStatusCounts": {
        "properties": {
          "total_sessions_analyzed": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Total Sessions Analyzed",
            "description": "Total number of sessions with validity analysis"
          },
          "valid": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Valid",
            "description": "Number of sessions marked as valid"
          },
          "suspect": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Suspect",
            "description": "Number of sessions marked as suspect"
          },
          "invalid": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Invalid",
            "description": "Number of sessions marked as invalid"
          }
        },
        "type": "object",
        "required": [
          "total_sessions_analyzed",
          "valid",
          "suspect",
          "invalid"
        ],
        "title": "ValidityStatusCounts",
        "description": "Count of sessions by validity status."
      },
      "ValiditySummaryResponse": {
        "properties": {
          "summary": {
            "$ref": "#/components/schemas/ValidityStatusCounts",
            "description": "Count of sessions by validity status"
          },
          "by_flag_type": {
            "$ref": "#/components/schemas/FlagTypeBreakdown",
            "description": "Breakdown of flags by type"
          },
          "trends": {
            "$ref": "#/components/schemas/ValidityTrend",
            "description": "Validity trend comparison (7-day vs 30-day)"
          },
          "action_needed": {
            "items": {
              "$ref": "#/components/schemas/SessionNeedingReview"
            },
            "type": "array",
            "title": "Action Needed",
            "description": "Sessions flagged as invalid or suspect needing review"
          },
          "period_days": {
            "type": "integer",
            "minimum": 1.0,
            "title": "Period Days",
            "description": "Number of days analyzed in this report"
          },
          "generated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Generated At",
            "description": "When this report was generated"
          }
        },
        "type": "object",
        "required": [
          "summary",
          "by_flag_type",
          "trends",
          "action_needed",
          "period_days",
          "generated_at"
        ],
        "title": "ValiditySummaryResponse",
        "description": "Aggregate validity statistics across all sessions.\n\nResponse schema for GET /v1/admin/validity-report endpoint.",
        "example": {
          "action_needed": [
            {
              "completed_at": "2025-12-10T10:30:00Z",
              "flags": [
                "multiple_rapid_responses",
                "total_time_too_fast",
                "high_guttman_errors"
              ],
              "session_id": 123,
              "severity_score": 6,
              "user_id": 456,
              "validity_status": "invalid"
            },
            {
              "completed_at": "2025-12-10T14:15:00Z",
              "flags": [
                "aberrant_response_pattern",
                "elevated_guttman_errors"
              ],
              "session_id": 124,
              "severity_score": 3,
              "user_id": 789,
              "validity_status": "suspect"
            }
          ],
          "by_flag_type": {
            "aberrant_response_pattern": 15,
            "elevated_guttman_errors": 35,
            "extended_pauses": 45,
            "high_guttman_errors": 12,
            "multiple_rapid_responses": 25,
            "suspiciously_fast_on_hard": 18,
            "total_time_excessive": 12,
            "total_time_too_fast": 8
          },
          "generated_at": "2025-12-12T00:00:00Z",
          "period_days": 30,
          "summary": {
            "invalid": 20,
            "suspect": 60,
            "total_sessions_analyzed": 1000,
            "valid": 920
          },
          "trends": {
            "invalid_rate_30d": 0.022,
            "invalid_rate_7d": 0.018,
            "suspect_rate_30d": 0.06,
            "suspect_rate_7d": 0.055,
            "trend": "stable"
          }
        }
      },
      "ValidityTrend": {
        "properties": {
          "invalid_rate_7d": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Invalid Rate 7D",
            "description": "Proportion of invalid sessions in last 7 days"
          },
          "invalid_rate_30d": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Invalid Rate 30D",
            "description": "Proportion of invalid sessions in last 30 days"
          },
          "suspect_rate_7d": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Suspect Rate 7D",
            "description": "Proportion of suspect sessions in last 7 days"
          },
          "suspect_rate_30d": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Suspect Rate 30D",
            "description": "Proportion of suspect sessions in last 30 days"
          },
          "trend": {
            "type": "string",
            "title": "Trend",
            "description": "Overall trend: 'improving', 'stable', or 'worsening'"
          }
        },
        "type": "object",
        "required": [
          "invalid_rate_7d",
          "invalid_rate_30d",
          "suspect_rate_7d",
          "suspect_rate_30d",
          "trend"
        ],
        "title": "ValidityTrend",
        "description": "Validity trend comparison between time periods."
      },
      "WeightedScoringStatus": {
        "properties": {
          "enabled": {
            "type": "boolean",
            "title": "Enabled",
            "description": "Whether weighted scoring is currently enabled"
          },
          "domain_weights": {
            "anyOf": [
              {
                "additionalProperties": {
                  "type": "number"
                },
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Domain Weights",
            "description": "Current domain weights if configured"
          },
          "updated_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Updated At",
            "description": "When the setting was last updated"
          }
        },
        "type": "object",
        "required": [
          "enabled"
        ],
        "title": "WeightedScoringStatus",
        "description": "Response model for weighted scoring status."
      },
      "WeightedScoringToggleRequest": {
        "properties": {
          "enabled": {
            "type": "boolean",
            "title": "Enabled",
            "description": "Whether to enable or disable weighted scoring"
          }
        },
        "type": "object",
        "required": [
          "enabled"
        ],
        "title": "WeightedScoringToggleRequest",
        "description": "Request model for toggling weighted scoring."
      },
      "WeightedScoringToggleResponse": {
        "properties": {
          "enabled": {
            "type": "boolean",
            "title": "Enabled",
            "description": "The new weighted scoring status after the operation"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Human-readable message describing the operation result"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At",
            "description": "When the setting was updated"
          }
        },
        "type": "object",
        "required": [
          "enabled",
          "message",
          "updated_at"
        ],
        "title": "WeightedScoringToggleResponse",
        "description": "Response model for weighted scoring toggle operation."
      },
      "WorstOffenderQuestion": {
        "properties": {
          "question_id": {
            "type": "integer",
            "title": "Question Id",
            "description": "Unique identifier of the question"
          },
          "question_type": {
            "type": "string",
            "title": "Question Type",
            "description": "Type of the question (pattern, logic, spatial, etc.)"
          },
          "difficulty_level": {
            "type": "string",
            "title": "Difficulty Level",
            "description": "Assigned difficulty level (easy, medium, hard)"
          },
          "non_functioning_count": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Non Functioning Count",
            "description": "Number of non-functioning distractors"
          },
          "inverted_count": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Inverted Count",
            "description": "Number of inverted distractors"
          },
          "total_responses": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Total Responses",
            "description": "Total number of responses for this question"
          },
          "effective_option_count": {
            "type": "number",
            "minimum": 0.0,
            "title": "Effective Option Count",
            "description": "Effective number of options (inverse Simpson index)"
          }
        },
        "type": "object",
        "required": [
          "question_id",
          "question_type",
          "difficulty_level",
          "non_functioning_count",
          "inverted_count",
          "total_responses",
          "effective_option_count"
        ],
        "title": "WorstOffenderQuestion",
        "description": "A question with the most distractor issues."
      },
      "app__schemas__calibration__SeverityLevel": {
        "type": "string",
        "enum": [
          "minor",
          "major",
          "severe"
        ],
        "title": "SeverityLevel",
        "description": "Severity level for miscalibration."
      },
      "app__schemas__validity__SeverityLevel": {
        "type": "string",
        "enum": [
          "high",
          "medium",
          "low"
        ],
        "title": "SeverityLevel",
        "description": "Severity level for validity flags."
      }
    },
    "securitySchemes": {
      "HTTPBearer": {
        "type": "http",
        "scheme": "bearer"
      }
    }
  },
  "tags": [
    {
      "name": "health",
      "description": "Health check endpoints for monitoring application status"
    },
    {
      "name": "auth",
      "description": "Authentication endpoints for user registration, login, and token management"
    },
    {
      "name": "user",
      "description": "User profile management endpoints"
    },
    {
      "name": "questions",
      "description": "Question retrieval endpoints for fetching unseen IQ test questions"
    },
    {
      "name": "test",
      "description": "Test session management, response submission, and results retrieval endpoints"
    }
  ]
}
