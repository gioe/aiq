# Prometheus Configuration for AIQ Backend
# Save this as prometheus.yml and run: prometheus --config.file=prometheus.yml

global:
  # How frequently to scrape targets
  scrape_interval: 15s

  # How frequently to evaluate alerting rules
  evaluation_interval: 15s

  # Attach these labels to any time series or alerts when communicating with
  # external systems (federation, remote storage, Alertmanager)
  external_labels:
    monitor: 'aiq-backend-monitor'
    environment: 'production'

# Alertmanager configuration (optional)
# alerting:
#   alertmanagers:
#     - static_configs:
#         - targets:
#           - 'localhost:9093'

# Load alerting rules from files
# rule_files:
#   - 'prometheus-rules.yml'

# Scrape configurations
scrape_configs:
  # AIQ Backend - Local Development
  - job_name: 'aiq-backend-local'
    scrape_interval: 15s
    scrape_timeout: 10s
    metrics_path: '/v1/metrics'
    static_configs:
      - targets: ['localhost:8000']
        labels:
          environment: 'development'
          instance: 'localhost'

  # AIQ Backend - Production (Railway)
  # Uncomment and configure for production monitoring
  # - job_name: 'aiq-backend-production'
  #   scrape_interval: 15s
  #   scrape_timeout: 10s
  #   metrics_path: '/v1/metrics'
  #   scheme: https
  #   static_configs:
  #     - targets: ['aiq-backend-production.up.railway.app:443']
  #       labels:
  #         environment: 'production'
  #         instance: 'railway-prod'
  #   # Optional: Add authentication if metrics endpoint is protected
  #   # bearer_token: 'your-metrics-token'

  # Self-monitoring: Prometheus itself
  - job_name: 'prometheus'
    scrape_interval: 10s
    static_configs:
      - targets: ['localhost:9090']
        labels:
          instance: 'prometheus-server'
