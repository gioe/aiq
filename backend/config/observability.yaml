# Backend-specific observability configuration
# Overrides defaults from libs/observability/config/default.yaml
# Values can use ${ENV_VAR} or ${ENV_VAR:default} syntax for environment variable substitution

sentry:
  enabled: true
  dsn: ${SENTRY_DSN}
  environment: ${ENV:development}
  release: ${RELEASE}
  traces_sample_rate: 0.1
  profiles_sample_rate: 0.0
  send_default_pii: false

otel:
  enabled: true
  service_name: aiq-backend
  endpoint: ${OTEL_EXPORTER_OTLP_ENDPOINT}
  otlp_headers: ${OTEL_EXPORTER_OTLP_HEADERS}
  metrics_enabled: true
  metrics_export_interval_millis: 300000  # 5 min â€” avoids Grafana Cloud free tier rate limits
  traces_enabled: false  # Traces routed to Sentry, not needed for OTLP push
  prometheus_enabled: true
  insecure: false

routing:
  # Errors: Sentry has superior error grouping and alerting
  errors: sentry
  # Metrics: OTEL/Prometheus for Grafana dashboards
  metrics: otel
  # Traces: Send to both Sentry Performance and OTEL for comprehensive tracing
  traces: both
